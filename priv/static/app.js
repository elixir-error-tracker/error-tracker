var I5=Object.create;var{defineProperty:b1,getPrototypeOf:x5,getOwnPropertyNames:A5}=Object;var H5=Object.prototype.hasOwnProperty;var O5=(Z,$,Q)=>{Q=Z!=null?I5(x5(Z)):{};const z=$||!Z||!Z.__esModule?b1(Q,"default",{value:Z,enumerable:!0}):Q;for(let J of A5(Z))if(!H5.call(z,J))b1(z,J,{get:()=>Z[J],enumerable:!0});return z};var w5=(Z,$)=>()=>($||Z(($={exports:{}}).exports,$),$.exports);var X5=w5((F5,Q1)=>{(function(Z,$){function Q(){z.width=Z.innerWidth,z.height=5*B.barThickness;var M=z.getContext("2d");M.shadowBlur=B.shadowBlur,M.shadowColor=B.shadowColor;var X,F=M.createLinearGradient(0,0,z.width,0);for(X in B.barColors)F.addColorStop(X,B.barColors[X]);M.lineWidth=B.barThickness,M.beginPath(),M.moveTo(0,B.barThickness/2),M.lineTo(Math.ceil(J*z.width),B.barThickness/2),M.strokeStyle=F,M.stroke()}var z,J,W,q=null,Y=null,G=null,B={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},K={config:function(M){for(var X in M)B.hasOwnProperty(X)&&(B[X]=M[X])},show:function(M){var X,F;W||(M?G=G||setTimeout(()=>K.show(),M):(W=!0,Y!==null&&Z.cancelAnimationFrame(Y),z||((F=(z=$.createElement("canvas")).style).position="fixed",F.top=F.left=F.right=F.margin=F.padding=0,F.zIndex=100001,F.display="none",B.className&&z.classList.add(B.className),X="resize",M=Q,(F=Z).addEventListener?F.addEventListener(X,M,!1):F.attachEvent?F.attachEvent("on"+X,M):F["on"+X]=M),z.parentElement||$.body.appendChild(z),z.style.opacity=1,z.style.display="block",K.progress(0),B.autoRun&&function V(){q=Z.requestAnimationFrame(V),K.progress("+"+0.05*Math.pow(1-Math.sqrt(J),2))}()))},progress:function(M){return M===void 0||(typeof M=="string"&&(M=(0<=M.indexOf("+")||0<=M.indexOf("-")?J:0)+parseFloat(M)),J=1<M?1:M,Q()),J},hide:function(){clearTimeout(G),G=null,W&&(W=!1,q!=null&&(Z.cancelAnimationFrame(q),q=null),function M(){return 1<=K.progress("+.1")&&(z.style.opacity-=0.05,z.style.opacity<=0.05)?(z.style.display="none",void(Y=null)):void(Y=Z.requestAnimationFrame(M))}())}};typeof Q1=="object"&&typeof F5=="object"?Q1.exports=K:typeof define=="function"&&define.amd?define(function(){return K}):this.topbar=K}).call(F5,window,document)});var P0=(Z)=>{if(typeof Z==="function")return Z;else return function(){return Z}},R5=typeof self!=="undefined"?self:null,R0=typeof window!=="undefined"?window:null,n=R5||R0||globalThis,P5="2.0.0",a={connecting:0,open:1,closing:2,closed:3},S5=1e4,b5=1000,f={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Z0={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Y1={longpoll:"longpoll",websocket:"websocket"},N5={complete:4},G1="base64url.bearer.phx.",f0=class{constructor(Z,$,Q,z){this.channel=Z,this.event=$,this.payload=Q||function(){return{}},this.receivedResp=null,this.timeout=z,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(Z){this.timeout=Z,this.reset(),this.send()}send(){if(this.hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()})}receive(Z,$){if(this.hasReceived(Z))$(this.receivedResp.response);return this.recHooks.push({status:Z,callback:$}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:Z,response:$,_ref:Q}){this.recHooks.filter((z)=>z.status===Z).forEach((z)=>z.callback($))}cancelRefEvent(){if(!this.refEvent)return;this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){if(this.timeoutTimer)this.cancelTimeout();this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(Z)=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=Z,this.matchReceive(Z)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(Z){return this.receivedResp&&this.receivedResp.status===Z}trigger(Z,$){this.channel.trigger(this.refEvent,{status:Z,response:$})}},N1=class{constructor(Z,$){this.callback=Z,this.timerCalc=$,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},C5=class{constructor(Z,$,Q){this.state=f.closed,this.topic=Z,this.params=P0($||{}),this.socket=Q,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new f0(this,Z0.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new N1(()=>{if(this.socket.isConnected())this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{if(this.rejoinTimer.reset(),this.isErrored())this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=f.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((z)=>z.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{if(this.state=f.errored,this.socket.isConnected())this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{if(this.rejoinTimer.reset(),this.socket.hasLogger())this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`);this.state=f.closed,this.socket.remove(this)}),this.onError((z)=>{if(this.socket.hasLogger())this.socket.log("channel",`error ${this.topic}`,z);if(this.isJoining())this.joinPush.reset();if(this.state=f.errored,this.socket.isConnected())this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{if(this.socket.hasLogger())this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout);if(new f0(this,Z0.leave,P0({}),this.timeout).send(),this.state=f.errored,this.joinPush.reset(),this.socket.isConnected())this.rejoinTimer.scheduleTimeout()}),this.on(Z0.reply,(z,J)=>{this.trigger(this.replyEventName(J),z)})}join(Z=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");else return this.timeout=Z,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(Z){this.on(Z0.close,Z)}onError(Z){return this.on(Z0.error,($)=>Z($))}on(Z,$){let Q=this.bindingRef++;return this.bindings.push({event:Z,ref:Q,callback:$}),Q}off(Z,$){this.bindings=this.bindings.filter((Q)=>{return!(Q.event===Z&&(typeof $==="undefined"||$===Q.ref))})}canPush(){return this.socket.isConnected()&&this.isJoined()}push(Z,$,Q=this.timeout){if($=$||{},!this.joinedOnce)throw new Error(`tried to push '${Z}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let z=new f0(this,Z,function(){return $},Q);if(this.canPush())z.send();else z.startTimeout(),this.pushBuffer.push(z);return z}leave(Z=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=f.leaving;let $=()=>{if(this.socket.hasLogger())this.socket.log("channel",`leave ${this.topic}`);this.trigger(Z0.close,"leave")},Q=new f0(this,Z0.leave,P0({}),Z);if(Q.receive("ok",()=>$()).receive("timeout",()=>$()),Q.send(),!this.canPush())Q.trigger("ok",{});return Q}onMessage(Z,$,Q){return $}isMember(Z,$,Q,z){if(this.topic!==Z)return!1;if(z&&z!==this.joinRef()){if(this.socket.hasLogger())this.socket.log("channel","dropping outdated message",{topic:Z,event:$,payload:Q,joinRef:z});return!1}else return!0}joinRef(){return this.joinPush.ref}rejoin(Z=this.timeout){if(this.isLeaving())return;this.socket.leaveOpenTopic(this.topic),this.state=f.joining,this.joinPush.resend(Z)}trigger(Z,$,Q,z){let J=this.onMessage(Z,$,Q,z);if($&&!J)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let W=this.bindings.filter((q)=>q.event===Z);for(let q=0;q<W.length;q++)W[q].callback(J,Q,z||this.joinRef())}replyEventName(Z){return`chan_reply_${Z}`}isClosed(){return this.state===f.closed}isErrored(){return this.state===f.errored}isJoined(){return this.state===f.joined}isJoining(){return this.state===f.joining}isLeaving(){return this.state===f.leaving}},p0=class{static request(Z,$,Q,z,J,W,q){if(n.XDomainRequest){let Y=new n.XDomainRequest;return this.xdomainRequest(Y,Z,$,z,J,W,q)}else if(n.XMLHttpRequest){let Y=new n.XMLHttpRequest;return this.xhrRequest(Y,Z,$,Q,z,J,W,q)}else if(n.fetch&&n.AbortController)return this.fetchRequest(Z,$,Q,z,J,W,q);else throw new Error("No suitable XMLHttpRequest implementation found")}static fetchRequest(Z,$,Q,z,J,W,q){let Y={method:Z,headers:Q,body:z},G=null;if(J){G=new AbortController;const B=setTimeout(()=>G.abort(),J);Y.signal=G.signal}return n.fetch($,Y).then((B)=>B.text()).then((B)=>this.parseJSON(B)).then((B)=>q&&q(B)).catch((B)=>{if(B.name==="AbortError"&&W)W();else q&&q(null)}),G}static xdomainRequest(Z,$,Q,z,J,W,q){if(Z.timeout=J,Z.open($,Q),Z.onload=()=>{let Y=this.parseJSON(Z.responseText);q&&q(Y)},W)Z.ontimeout=W;return Z.onprogress=()=>{},Z.send(z),Z}static xhrRequest(Z,$,Q,z,J,W,q,Y){Z.open($,Q,!0),Z.timeout=W;for(let[G,B]of Object.entries(z))Z.setRequestHeader(G,B);if(Z.onerror=()=>Y&&Y(null),Z.onreadystatechange=()=>{if(Z.readyState===N5.complete&&Y){let G=this.parseJSON(Z.responseText);Y(G)}},q)Z.ontimeout=q;return Z.send(J),Z}static parseJSON(Z){if(!Z||Z==="")return null;try{return JSON.parse(Z)}catch{return console&&console.log("failed to parse JSON response",Z),null}}static serialize(Z,$){let Q=[];for(var z in Z){if(!Object.prototype.hasOwnProperty.call(Z,z))continue;let J=$?`${$}[${z}]`:z,W=Z[z];if(typeof W==="object")Q.push(this.serialize(W,J));else Q.push(encodeURIComponent(J)+"="+encodeURIComponent(W))}return Q.join("&")}static appendParams(Z,$){if(Object.keys($).length===0)return Z;let Q=Z.match(/\?/)?"&":"?";return`${Z}${Q}${this.serialize($)}`}},y5=(Z)=>{let $="",Q=new Uint8Array(Z),z=Q.byteLength;for(let J=0;J<z;J++)$+=String.fromCharCode(Q[J]);return btoa($)},B0=class{constructor(Z,$){if($&&$.length===2&&$[1].startsWith(G1))this.authToken=atob($[1].slice(G1.length));this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(Z),this.readyState=a.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpoint(Z){return Z.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Y1.websocket),"$1/"+Y1.longpoll)}endpointURL(){return p0.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(Z,$,Q){this.close(Z,$,Q),this.readyState=a.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===a.open||this.readyState===a.connecting}poll(){const Z={Accept:"application/json"};if(this.authToken)Z["X-Phoenix-AuthToken"]=this.authToken;this.ajax("GET",Z,null,()=>this.ontimeout(),($)=>{if($){var{status:Q,token:z,messages:J}=$;this.token=z}else Q=0;switch(Q){case 200:J.forEach((W)=>{setTimeout(()=>this.onmessage({data:W}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=a.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${Q}`)}})}send(Z){if(typeof Z!=="string")Z=y5(Z);if(this.currentBatch)this.currentBatch.push(Z);else if(this.awaitingBatchAck)this.batchBuffer.push(Z);else this.currentBatch=[Z],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0)}batchSend(Z){this.awaitingBatchAck=!0,this.ajax("POST",{"Content-Type":"application/x-ndjson"},Z.join("\n"),()=>this.onerror("timeout"),($)=>{if(this.awaitingBatchAck=!1,!$||$.status!==200)this.onerror($&&$.status),this.closeAndRetry(1011,"internal server error",!1);else if(this.batchBuffer.length>0)this.batchSend(this.batchBuffer),this.batchBuffer=[]})}close(Z,$,Q){for(let J of this.reqs)J.abort();this.readyState=a.closed;let z=Object.assign({code:1000,reason:void 0,wasClean:!0},{code:Z,reason:$,wasClean:Q});if(this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent!=="undefined")this.onclose(new CloseEvent("close",z));else this.onclose(z)}ajax(Z,$,Q,z,J){let W,q=()=>{this.reqs.delete(W),z()};W=p0.request(Z,this.endpointURL(),$,Q,this.timeout,q,(Y)=>{if(this.reqs.delete(W),this.isActive())J(Y)}),this.reqs.add(W)}};var m0={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(Z,$){if(Z.payload.constructor===ArrayBuffer)return $(this.binaryEncode(Z));else{let Q=[Z.join_ref,Z.ref,Z.topic,Z.event,Z.payload];return $(JSON.stringify(Q))}},decode(Z,$){if(Z.constructor===ArrayBuffer)return $(this.binaryDecode(Z));else{let[Q,z,J,W,q]=JSON.parse(Z);return $({join_ref:Q,ref:z,topic:J,event:W,payload:q})}},binaryEncode(Z){let{join_ref:$,ref:Q,event:z,topic:J,payload:W}=Z,q=this.META_LENGTH+$.length+Q.length+J.length+z.length,Y=new ArrayBuffer(this.HEADER_LENGTH+q),G=new DataView(Y),B=0;G.setUint8(B++,this.KINDS.push),G.setUint8(B++,$.length),G.setUint8(B++,Q.length),G.setUint8(B++,J.length),G.setUint8(B++,z.length),Array.from($,(M)=>G.setUint8(B++,M.charCodeAt(0))),Array.from(Q,(M)=>G.setUint8(B++,M.charCodeAt(0))),Array.from(J,(M)=>G.setUint8(B++,M.charCodeAt(0))),Array.from(z,(M)=>G.setUint8(B++,M.charCodeAt(0)));var K=new Uint8Array(Y.byteLength+W.byteLength);return K.set(new Uint8Array(Y),0),K.set(new Uint8Array(W),Y.byteLength),K.buffer},binaryDecode(Z){let $=new DataView(Z),Q=$.getUint8(0),z=new TextDecoder;switch(Q){case this.KINDS.push:return this.decodePush(Z,$,z);case this.KINDS.reply:return this.decodeReply(Z,$,z);case this.KINDS.broadcast:return this.decodeBroadcast(Z,$,z)}},decodePush(Z,$,Q){let z=$.getUint8(1),J=$.getUint8(2),W=$.getUint8(3),q=this.HEADER_LENGTH+this.META_LENGTH-1,Y=Q.decode(Z.slice(q,q+z));q=q+z;let G=Q.decode(Z.slice(q,q+J));q=q+J;let B=Q.decode(Z.slice(q,q+W));q=q+W;let K=Z.slice(q,Z.byteLength);return{join_ref:Y,ref:null,topic:G,event:B,payload:K}},decodeReply(Z,$,Q){let z=$.getUint8(1),J=$.getUint8(2),W=$.getUint8(3),q=$.getUint8(4),Y=this.HEADER_LENGTH+this.META_LENGTH,G=Q.decode(Z.slice(Y,Y+z));Y=Y+z;let B=Q.decode(Z.slice(Y,Y+J));Y=Y+J;let K=Q.decode(Z.slice(Y,Y+W));Y=Y+W;let M=Q.decode(Z.slice(Y,Y+q));Y=Y+q;let X=Z.slice(Y,Z.byteLength),F={status:M,response:X};return{join_ref:G,ref:B,topic:K,event:Z0.reply,payload:F}},decodeBroadcast(Z,$,Q){let z=$.getUint8(1),J=$.getUint8(2),W=this.HEADER_LENGTH+2,q=Q.decode(Z.slice(W,W+z));W=W+z;let Y=Q.decode(Z.slice(W,W+J));W=W+J;let G=Z.slice(W,Z.byteLength);return{join_ref:null,ref:null,topic:q,event:Y,payload:G}}},C1=class{constructor(Z,$={}){if(this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=$.timeout||S5,this.transport=$.transport||n.WebSocket||B0,this.primaryPassedHealthCheck=!1,this.longPollFallbackMs=$.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=$.sessionStorage||n&&n.sessionStorage,this.establishedConnections=0,this.defaultEncoder=m0.encode.bind(m0),this.defaultDecoder=m0.decode.bind(m0),this.closeWasClean=!1,this.disconnecting=!1,this.binaryType=$.binaryType||"arraybuffer",this.connectClock=1,this.transport!==B0)this.encode=$.encode||this.defaultEncoder,this.decode=$.decode||this.defaultDecoder;else this.encode=this.defaultEncoder,this.decode=this.defaultDecoder;let Q=null;if(R0&&R0.addEventListener)R0.addEventListener("pagehide",(z)=>{if(this.conn)this.disconnect(),Q=this.connectClock}),R0.addEventListener("pageshow",(z)=>{if(Q===this.connectClock)Q=null,this.connect()});if(this.heartbeatIntervalMs=$.heartbeatIntervalMs||30000,this.rejoinAfterMs=(z)=>{if($.rejoinAfterMs)return $.rejoinAfterMs(z);else return[1000,2000,5000][z-1]||1e4},this.reconnectAfterMs=(z)=>{if($.reconnectAfterMs)return $.reconnectAfterMs(z);else return[10,50,100,150,200,250,500,1000,2000][z-1]||5000},this.logger=$.logger||null,!this.logger&&$.debug)this.logger=(z,J,W)=>{console.log(`${z}: ${J}`,W)};this.longpollerTimeout=$.longpollerTimeout||20000,this.params=P0($.params||{}),this.endPoint=`${Z}/${Y1.websocket}`,this.vsn=$.vsn||P5,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new N1(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs),this.authToken=$.authToken}getLongPollTransport(){return B0}replaceTransport(Z){if(this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn)this.conn.close(),this.conn=null;this.transport=Z}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let Z=p0.appendParams(p0.appendParams(this.endPoint,this.params()),{vsn:this.vsn});if(Z.charAt(0)!=="/")return Z;if(Z.charAt(1)==="/")return`${this.protocol()}:${Z}`;return`${this.protocol()}://${location.host}${Z}`}disconnect(Z,$,Q){this.connectClock++,this.disconnecting=!0,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(()=>{this.disconnecting=!1,Z&&Z()},$,Q)}connect(Z){if(Z)console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=P0(Z);if(this.conn&&!this.disconnecting)return;if(this.longPollFallbackMs&&this.transport!==B0)this.connectWithFallback(B0,this.longPollFallbackMs);else this.transportConnect()}log(Z,$,Q){this.logger&&this.logger(Z,$,Q)}hasLogger(){return this.logger!==null}onOpen(Z){let $=this.makeRef();return this.stateChangeCallbacks.open.push([$,Z]),$}onClose(Z){let $=this.makeRef();return this.stateChangeCallbacks.close.push([$,Z]),$}onError(Z){let $=this.makeRef();return this.stateChangeCallbacks.error.push([$,Z]),$}onMessage(Z){let $=this.makeRef();return this.stateChangeCallbacks.message.push([$,Z]),$}ping(Z){if(!this.isConnected())return!1;let $=this.makeRef(),Q=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:$});let z=this.onMessage((J)=>{if(J.ref===$)this.off([z]),Z(Date.now()-Q)});return!0}transportConnect(){this.connectClock++,this.closeWasClean=!1;let Z=void 0;if(this.authToken)Z=["phoenix",`${G1}${btoa(this.authToken).replace(/=/g,"")}`];this.conn=new this.transport(this.endPointURL(),Z),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=($)=>this.onConnError($),this.conn.onmessage=($)=>this.onConnMessage($),this.conn.onclose=($)=>this.onConnClose($)}getSession(Z){return this.sessionStore&&this.sessionStore.getItem(Z)}storeSession(Z,$){this.sessionStore&&this.sessionStore.setItem(Z,$)}connectWithFallback(Z,$=2500){clearTimeout(this.fallbackTimer);let Q=!1,z=!0,J,W,q=(Y)=>{this.log("transport",`falling back to ${Z.name}...`,Y),this.off([J,W]),z=!1,this.replaceTransport(Z),this.transportConnect()};if(this.getSession(`phx:fallback:${Z.name}`))return q("memorized");this.fallbackTimer=setTimeout(q,$),W=this.onError((Y)=>{if(this.log("transport","error",Y),z&&!Q)clearTimeout(this.fallbackTimer),q(Y)}),this.onOpen(()=>{if(Q=!0,!z){if(!this.primaryPassedHealthCheck)this.storeSession(`phx:fallback:${Z.name}`,"true");return this.log("transport",`established ${Z.name} fallback`)}clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(q,$),this.ping((Y)=>{this.log("transport","connected to primary after",Y),this.primaryPassedHealthCheck=!0,clearTimeout(this.fallbackTimer)})}),this.transportConnect()}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){if(this.hasLogger())this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`);this.closeWasClean=!1,this.disconnecting=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,Z])=>Z())}heartbeatTimeout(){if(this.pendingHeartbeatRef){if(this.pendingHeartbeatRef=null,this.hasLogger())this.log("transport","heartbeat timeout. Attempting to re-establish connection");this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),b5,"heartbeat timeout")}}resetHeartbeat(){if(this.conn&&this.conn.skipHeartbeat)return;this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}teardown(Z,$,Q){if(!this.conn)return Z&&Z();let z=this.connectClock;this.waitForBufferDone(()=>{if(z!==this.connectClock)return;if(this.conn)if($)this.conn.close($,Q||"");else this.conn.close();this.waitForSocketClosed(()=>{if(z!==this.connectClock)return;if(this.conn)this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null;Z&&Z()})})}waitForBufferDone(Z,$=1){if($===5||!this.conn||!this.conn.bufferedAmount){Z();return}setTimeout(()=>{this.waitForBufferDone(Z,$+1)},150*$)}waitForSocketClosed(Z,$=1){if($===5||!this.conn||this.conn.readyState===a.closed){Z();return}setTimeout(()=>{this.waitForSocketClosed(Z,$+1)},150*$)}onConnClose(Z){let $=Z&&Z.code;if(this.hasLogger())this.log("transport","close",Z);if(this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&$!==1000)this.reconnectTimer.scheduleTimeout();this.stateChangeCallbacks.close.forEach(([,Q])=>Q(Z))}onConnError(Z){if(this.hasLogger())this.log("transport",Z);let $=this.transport,Q=this.establishedConnections;if(this.stateChangeCallbacks.error.forEach(([,z])=>{z(Z,$,Q)}),$===this.transport||Q>0)this.triggerChanError()}triggerChanError(){this.channels.forEach((Z)=>{if(!(Z.isErrored()||Z.isLeaving()||Z.isClosed()))Z.trigger(Z0.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case a.connecting:return"connecting";case a.open:return"open";case a.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(Z){this.off(Z.stateChangeRefs),this.channels=this.channels.filter(($)=>$!==Z)}off(Z){for(let $ in this.stateChangeCallbacks)this.stateChangeCallbacks[$]=this.stateChangeCallbacks[$].filter(([Q])=>{return Z.indexOf(Q)===-1})}channel(Z,$={}){let Q=new C5(Z,$,this);return this.channels.push(Q),Q}push(Z){if(this.hasLogger()){let{topic:$,event:Q,payload:z,ref:J,join_ref:W}=Z;this.log("push",`${$} ${Q} (${W}, ${J})`,z)}if(this.isConnected())this.encode(Z,($)=>this.conn.send($));else this.sendBuffer.push(()=>this.encode(Z,($)=>this.conn.send($)))}makeRef(){let Z=this.ref+1;if(Z===this.ref)this.ref=0;else this.ref=Z;return this.ref.toString()}sendHeartbeat(){if(this.pendingHeartbeatRef&&!this.isConnected())return;this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs)}flushSendBuffer(){if(this.isConnected()&&this.sendBuffer.length>0)this.sendBuffer.forEach((Z)=>Z()),this.sendBuffer=[]}onConnMessage(Z){this.decode(Z.data,($)=>{let{topic:Q,event:z,payload:J,ref:W,join_ref:q}=$;if(W&&W===this.pendingHeartbeatRef)this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);if(this.hasLogger())this.log("receive",`${J.status||""} ${Q} ${z} ${W&&"("+W+")"||""}`,J);for(let Y=0;Y<this.channels.length;Y++){const G=this.channels[Y];if(!G.isMember(Q,z,J,q))continue;G.trigger(z,J,W,q)}for(let Y=0;Y<this.stateChangeCallbacks.message.length;Y++){let[,G]=this.stateChangeCallbacks.message[Y];G($)}})}leaveOpenTopic(Z){let $=this.channels.find((Q)=>Q.topic===Z&&(Q.isJoined()||Q.isJoining()));if($){if(this.hasLogger())this.log("transport",`leaving duplicate topic "${Z}"`);$.leave()}}};var e5=function(){const Z=new Set,$=document.querySelectorAll("*[id]");for(let Q=0,z=$.length;Q<z;Q++)if(Z.has($[Q].id))console.error(`Multiple IDs detected: ${$[Q].id}. Ensure unique element ids.`);else Z.add($[Q].id)},Z9=function(Z){const $=new Set;Object.keys(Z).forEach((Q)=>{const z=document.getElementById(Q);if(z&&z.parentElement&&z.parentElement.getAttribute("phx-update")!=="stream")$.add(`The stream container with id "${z.parentElement.id}" is missing the phx-update="stream" attribute. Ensure it is set for streams to work properly.`)}),$.forEach((Q)=>console.error(Q))},K9=function(Z,$){var Q=$.attributes,z,J,W,q,Y;if($.nodeType===r1||Z.nodeType===r1)return;for(var G=Q.length-1;G>=0;G--)if(z=Q[G],J=z.name,W=z.namespaceURI,q=z.value,W){if(J=z.localName||J,Y=Z.getAttributeNS(W,J),Y!==q){if(z.prefix==="xmlns")J=z.name;Z.setAttributeNS(W,J,q)}}else if(Y=Z.getAttribute(J),Y!==q)Z.setAttribute(J,q);var B=Z.attributes;for(var K=B.length-1;K>=0;K--)if(z=B[K],J=z.name,W=z.namespaceURI,W){if(J=z.localName||J,!$.hasAttributeNS(W,J))Z.removeAttributeNS(W,J)}else if(!$.hasAttribute(J))Z.removeAttribute(J)},F9=function(Z){var $=u.createElement("template");return $.innerHTML=Z,$.content.childNodes[0]},X9=function(Z){if(!d0)d0=u.createRange(),d0.selectNode(u.body);var $=d0.createContextualFragment(Z);return $.childNodes[0]},L9=function(Z){var $=u.createElement("body");return $.innerHTML=Z,$.childNodes[0]},D9=function(Z){if(Z=Z.trim(),U9)return F9(Z);else if(V9)return X9(Z);return L9(Z)},i0=function(Z,$){var Q=Z.nodeName,z=$.nodeName,J,W;if(Q===z)return!0;if(J=Q.charCodeAt(0),W=z.charCodeAt(0),J<=90&&W>=97)return Q===z.toUpperCase();else if(W<=90&&J>=97)return z===Q.toUpperCase();else return!1},I9=function(Z,$){return!$||$===M9?u.createElement(Z):u.createElementNS($,Z)},x9=function(Z,$){var Q=Z.firstChild;while(Q){var z=Q.nextSibling;$.appendChild(Q),Q=z}return $},V1=function(Z,$,Q){if(Z[Q]!==$[Q])if(Z[Q]=$[Q],Z[Q])Z.setAttribute(Q,"");else Z.removeAttribute(Q)},Y0=function(){},A9=function(Z){if(Z)return Z.getAttribute&&Z.getAttribute("id")||Z.id},H9=function(Z){return function $(Q,z,J){if(!J)J={};if(typeof z==="string")if(Q.nodeName==="#document"||Q.nodeName==="HTML"||Q.nodeName==="BODY"){var W=z;z=u.createElement("html"),z.innerHTML=W}else z=D9(z);else if(z.nodeType===l1)z=z.firstElementChild;var q=J.getNodeKey||A9,Y=J.onBeforeNodeAdded||Y0,G=J.onNodeAdded||Y0,B=J.onBeforeElUpdated||Y0,K=J.onElUpdated||Y0,M=J.onBeforeNodeDiscarded||Y0,X=J.onNodeDiscarded||Y0,F=J.onBeforeElChildrenUpdated||Y0,V=J.skipFromChildren||Y0,L=J.addChild||function(A,H){return A.appendChild(H)},x=J.childrenOnly===!0,T=Object.create(null),p=[];function I(A){p.push(A)}function S(A,H){if(A.nodeType===k0){var N=A.firstChild;while(N){var w=void 0;if(H&&(w=q(N)))I(w);else if(X(N),N.firstChild)S(N,H);N=N.nextSibling}}}function k(A,H,N){if(M(A)===!1)return;if(H)H.removeChild(A);X(A),S(A,N)}function v(A){if(A.nodeType===k0||A.nodeType===l1){var H=A.firstChild;while(H){var N=q(H);if(N)T[N]=H;v(H),H=H.nextSibling}}}v(Q);function U(A){G(A);var H=A.firstChild;while(H){var N=H.nextSibling,w=q(H);if(w){var P=T[w];if(P&&i0(H,P))H.parentNode.replaceChild(P,H),E(P,H);else U(H)}else U(H);H=N}}function D(A,H,N){while(H){var w=H.nextSibling;if(N=q(H))I(N);else k(H,A,!0);H=w}}function E(A,H,N){var w=q(H);if(w)delete T[w];if(!N){var P=B(A,H);if(P===!1)return;else if(P instanceof HTMLElement)A=P,v(A);if(Z(A,H),K(A),F(A,H)===!1)return}if(A.nodeName!=="TEXTAREA")i(A,H);else o1.TEXTAREA(A,H)}function i(A,H){var N=V(A,H),w=H.firstChild,P=A.firstChild,F0,e,X0,u0,J0;Z:while(w){u0=w.nextSibling,F0=q(w);while(!N&&P){if(X0=P.nextSibling,w.isSameNode&&w.isSameNode(P)){w=u0,P=X0;continue Z}e=q(P);var E0=P.nodeType,W0=void 0;if(E0===w.nodeType){if(E0===k0){if(F0){if(F0!==e)if(J0=T[F0])if(X0===J0)W0=!1;else{if(A.insertBefore(J0,P),e)I(e);else k(P,A,!0);P=J0,e=q(P)}else W0=!1}else if(e)W0=!1;if(W0=W0!==!1&&i0(P,w),W0)E(P,w)}else if(E0===t1||E0==e1){if(W0=!0,P.nodeValue!==w.nodeValue)P.nodeValue=w.nodeValue}}if(W0){w=u0,P=X0;continue Z}if(e)I(e);else k(P,A,!0);P=X0}if(F0&&(J0=T[F0])&&i0(J0,w)){if(!N)L(A,J0);E(J0,w)}else{var q1=Y(w);if(q1!==!1){if(q1)w=q1;if(w.actualize)w=w.actualize(A.ownerDocument||u);L(A,w),U(w)}}w=u0,P=X0}D(A,P,e);var S1=o1[A.nodeName];if(S1)S1(A,H)}var O=Q,t=O.nodeType,c=z.nodeType;if(!x){if(t===k0)if(c===k0){if(!i0(Q,z))X(Q),O=x9(Q,I9(z.nodeName,z.namespaceURI))}else O=z;else if(t===t1||t===e1)if(c===t){if(O.nodeValue!==z.nodeValue)O.nodeValue=z.nodeValue;return O}else O=z}if(O===z)X(Q);else{if(z.isSameNode&&z.isSameNode(O))return;if(E(O,z,x),p)for(var J1=0,D5=p.length;J1<D5;J1++){var W1=T[p[J1]];if(W1)k(W1,W1.parentNode,!1)}}if(!x&&O!==Q&&Q.parentNode){if(O.actualize)O=O.actualize(Q.ownerDocument||u);Q.parentNode.replaceChild(O,Q)}return O}};var J5="consecutive-reloads",T5=10,g5=5000,k5=1e4,v5=30000,W5=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading","phx-hook-loading"],Q0="data-phx-component",H0="data-phx-view",B1="data-phx-link",_5="track-static",h5="data-phx-link-state",O0="data-phx-ref-loading",d="data-phx-ref-src",y="data-phx-ref-lock",y1="phx-pending-refs",q5="track-uploads",z0="data-phx-upload-ref",O1="data-phx-preflighted-refs",u5="data-phx-done-refs",T1="drop-target",X1="data-phx-active-refs",r0="phx:live-file:updated",Y5="data-phx-skip",G5="data-phx-id",g1="data-phx-prune",k1="phx-connected",j0="phx-loading",L0="phx-error",v1="phx-client-error",S0="phx-server-error",V0="data-phx-parent-id",w1="data-phx-main",G0="data-phx-root-id",L1="viewport-top",D1="viewport-bottom",E5="trigger-action",e0="phx-has-focused",f5=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],B5=["checkbox","radio"],_0="phx-has-submitted",l="data-phx-session",h0=`[${l}]`,I1="data-phx-sticky",M0="data-phx-static",x1="data-phx-readonly",A0="data-phx-disabled",_1="disable-with",Z1="data-phx-disable-with-restore",b0="hook",m5="debounce",p5="throttle",$1="update",o0="stream",N0="data-phx-stream",j5="data-phx-portal",w0="data-phx-teleported",j1="data-phx-teleported-src",l0="data-phx-runtime-hook",c5="data-phx-pid",s5="key",r="phxPrivate",h1="auto-recover",c0="phx:live-socket:debug",K1="phx:live-socket:profiling",M1="phx:live-socket:latency-sim",s0="phx:nav-history-position",d5="progress",u1="mounted",E1="__phoenix_reload_status__",i5=1,f1=3,n5=200,a5=500,r5="phx-",o5=30000,C0="debounce-trigger",y0="throttled",m1="debounce-prev-key",l5={debounce:300,throttle:300},p1=[O0,d,y],s="s",U1="r",_="c",C="k",o="kc",c1="e",s1="r",d1="t",q0="p",D0="stream",t5=class{constructor(Z,$,Q){const{chunk_size:z,chunk_timeout:J}=$;this.liveSocket=Q,this.entry=Z,this.offset=0,this.chunkSize=z,this.chunkTimeout=J,this.chunkTimer=null,this.errored=!1,this.uploadChannel=Q.channel(`lvu:${Z.ref}`,{token:Z.metadata()})}error(Z){if(this.errored)return;this.uploadChannel.leave(),this.errored=!0,clearTimeout(this.chunkTimer),this.entry.error(Z)}upload(){this.uploadChannel.onError((Z)=>this.error(Z)),this.uploadChannel.join().receive("ok",(Z)=>this.readNextChunk()).receive("error",(Z)=>this.error(Z))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){const Z=new window.FileReader,$=this.entry.file.slice(this.offset,this.chunkSize+this.offset);Z.onload=(Q)=>{if(Q.target.error===null)this.offset+=Q.target.result.byteLength,this.pushChunk(Q.target.result);else return b("Read error: "+Q.target.error)},Z.readAsArrayBuffer($)}pushChunk(Z){if(!this.uploadChannel.isJoined())return;this.uploadChannel.push("chunk",Z,this.chunkTimeout).receive("ok",()=>{if(this.entry.progress(this.offset/this.entry.file.size*100),!this.isDone())this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0)}).receive("error",({reason:$})=>this.error($))}},b=(Z,$)=>console.error&&console.error(Z,$),$0=(Z)=>{const $=typeof Z;return $==="number"||$==="string"&&/^(0|[1-9]\d*)$/.test(Z)},$9=(Z,$,Q,z)=>{if(Z.liveSocket.isDebugEnabled())console.log(`${Z.id} ${$}: ${Q} - `,z)},T0=(Z)=>typeof Z==="function"?Z:function(){return Z},t0=(Z)=>{return JSON.parse(JSON.stringify(Z))},v0=(Z,$,Q)=>{do{if(Z.matches(`[${$}]`)&&!Z.disabled)return Z;Z=Z.parentElement||Z.parentNode}while(Z!==null&&Z.nodeType===1&&!(Q&&Q.isSameNode(Z)||Z.matches(h0)));return null},I0=(Z)=>{return Z!==null&&typeof Z==="object"&&!(Z instanceof Array)},Q9=(Z,$)=>JSON.stringify(Z)===JSON.stringify($),i1=(Z)=>{for(let $ in Z)return!1;return!0},U0=(Z,$)=>Z&&$(Z),z9=function(Z,$,Q,z){Z.forEach((J)=>{new t5(J,Q.config,z).upload()})},J9={canPushState(){return typeof history.pushState!=="undefined"},dropLocal(Z,$,Q){return Z.removeItem(this.localKey($,Q))},updateLocal(Z,$,Q,z,J){const W=this.getLocal(Z,$,Q),q=this.localKey($,Q),Y=W===null?z:J(W);return Z.setItem(q,JSON.stringify(Y)),Y},getLocal(Z,$,Q){return JSON.parse(Z.getItem(this.localKey($,Q)))},updateCurrentState(Z){if(!this.canPushState())return;history.replaceState(Z(history.state||{}),"",window.location.href)},pushState(Z,$,Q){if(this.canPushState()){if(Q!==window.location.href){if($.type=="redirect"&&$.scroll){const z=history.state||{};z.scroll=$.scroll,history.replaceState(z,"",window.location.href)}delete $.scroll,history[Z+"State"]($,"",Q||null),window.requestAnimationFrame(()=>{const z=this.getHashTargetEl(window.location.hash);if(z)z.scrollIntoView();else if($.type==="redirect")window.scroll(0,0)})}}else this.redirect(Q)},setCookie(Z,$,Q){const z=typeof Q==="number"?` max-age=${Q};`:"";document.cookie=`${Z}=${$};${z} path=/`},getCookie(Z){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${Z}s*=s*([^;]*).*\$)|^.*\$`),"$1")},deleteCookie(Z){document.cookie=`${Z}=; max-age=-1; path=/`},redirect(Z,$,Q=(z)=>{window.location.href=z}){if($)this.setCookie("__phoenix_flash__",$,60);Q(Z)},localKey(Z,$){return`${Z}-${$}`},getHashTargetEl(Z){const $=Z.toString().substring(1);if($==="")return;return document.getElementById($)||document.querySelector(`a[name="${$}"]`)}},h=J9,K0={byId(Z){return document.getElementById(Z)||b(`no id found for ${Z}`)},removeClass(Z,$){if(Z.classList.remove($),Z.classList.length===0)Z.removeAttribute("class")},all(Z,$,Q){if(!Z)return[];const z=Array.from(Z.querySelectorAll($));if(Q)z.forEach(Q);return z},childNodeLength(Z){const $=document.createElement("template");return $.innerHTML=Z,$.content.childElementCount},isUploadInput(Z){return Z.type==="file"&&Z.getAttribute(z0)!==null},isAutoUpload(Z){return Z.hasAttribute("data-phx-auto-upload")},findUploadInputs(Z){const $=Z.id,Q=this.all(document,`input[type="file"][${z0}][form="${$}"]`);return this.all(Z,`input[type="file"][${z0}]`).concat(Q)},findComponentNodeList(Z,$,Q=document){return this.all(Q,`[${H0}="${Z}"][${Q0}="${$}"]`)},isPhxDestroyed(Z){return Z.id&&K0.private(Z,"destroyed")?!0:!1},wantsNewTab(Z){const $=Z.ctrlKey||Z.shiftKey||Z.metaKey||Z.button&&Z.button===1,Q=Z.target instanceof HTMLAnchorElement&&Z.target.hasAttribute("download"),z=Z.target.hasAttribute("target")&&Z.target.getAttribute("target").toLowerCase()==="_blank",J=Z.target.hasAttribute("target")&&!Z.target.getAttribute("target").startsWith("_");return $||z||Q||J},isUnloadableFormSubmit(Z){if(Z.target&&Z.target.getAttribute("method")==="dialog"||Z.submitter&&Z.submitter.getAttribute("formmethod")==="dialog")return!1;else return!Z.defaultPrevented&&!this.wantsNewTab(Z)},isNewPageClick(Z,$){const Q=Z.target instanceof HTMLAnchorElement?Z.target.getAttribute("href"):null;let z;if(Z.defaultPrevented||Q===null||this.wantsNewTab(Z))return!1;if(Q.startsWith("mailto:")||Q.startsWith("tel:"))return!1;if(Z.target.isContentEditable)return!1;try{z=new URL(Q)}catch{try{z=new URL(Q,$)}catch{return!0}}if(z.host===$.host&&z.protocol===$.protocol){if(z.pathname===$.pathname&&z.search===$.search)return z.hash===""&&!z.href.endsWith("#")}return z.protocol.startsWith("http")},markPhxChildDestroyed(Z){if(this.isPhxChild(Z))Z.setAttribute(l,"");this.putPrivate(Z,"destroyed",!0)},findPhxChildrenInFragment(Z,$){const Q=document.createElement("template");return Q.innerHTML=Z,this.findPhxChildren(Q.content,$)},isIgnored(Z,$){return(Z.getAttribute($)||Z.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(Z,$,Q){return Z.getAttribute&&Q.indexOf(Z.getAttribute($))>=0},findPhxSticky(Z){return this.all(Z,`[${I1}]`)},findPhxChildren(Z,$){return this.all(Z,`${h0}[${V0}="${$}"]`)},findExistingParentCIDs(Z,$){const Q=new Set,z=new Set;return $.forEach((J)=>{this.all(document,`[${H0}="${Z}"][${Q0}="${J}"]`).forEach((W)=>{Q.add(J),this.all(W,`[${H0}="${Z}"][${Q0}]`).map((q)=>parseInt(q.getAttribute(Q0))).forEach((q)=>z.add(q))})}),z.forEach((J)=>Q.delete(J)),Q},private(Z,$){return Z[r]&&Z[r][$]},deletePrivate(Z,$){Z[r]&&delete Z[r][$]},putPrivate(Z,$,Q){if(!Z[r])Z[r]={};Z[r][$]=Q},updatePrivate(Z,$,Q,z){const J=this.private(Z,$);if(J===void 0)this.putPrivate(Z,$,z(Q));else this.putPrivate(Z,$,z(J))},syncPendingAttrs(Z,$){if(!Z.hasAttribute(d))return;W5.forEach((Q)=>{Z.classList.contains(Q)&&$.classList.add(Q)}),p1.filter((Q)=>Z.hasAttribute(Q)).forEach((Q)=>{$.setAttribute(Q,Z.getAttribute(Q))})},copyPrivates(Z,$){if($[r])Z[r]=$[r]},putTitle(Z){const $=document.querySelector("title");if($){const{prefix:Q,suffix:z,default:J}=$.dataset,W=typeof Z!=="string"||Z.trim()==="";if(W&&typeof J!=="string")return;const q=W?J:Z;document.title=`${Q||""}${q||""}${z||""}`}else document.title=Z},debounce(Z,$,Q,z,J,W,q,Y){let G=Z.getAttribute(Q),B=Z.getAttribute(J);if(G==="")G=z;if(B==="")B=W;const K=G||B;switch(K){case null:return Y();case"blur":if(this.incCycle(Z,"debounce-blur-cycle",()=>{if(q())Y()}),this.once(Z,"debounce-blur"))Z.addEventListener("blur",()=>this.triggerCycle(Z,"debounce-blur-cycle"));return;default:const M=parseInt(K),X=()=>B?this.deletePrivate(Z,y0):Y(),F=this.incCycle(Z,C0,X);if(isNaN(M))return b(`invalid throttle/debounce value: ${K}`);if(B){let L=!1;if($.type==="keydown"){const x=this.private(Z,m1);this.putPrivate(Z,m1,$.key),L=x!==$.key}if(!L&&this.private(Z,y0))return!1;else{Y();const x=setTimeout(()=>{if(q())this.triggerCycle(Z,C0)},M);this.putPrivate(Z,y0,x)}}else setTimeout(()=>{if(q())this.triggerCycle(Z,C0,F)},M);const V=Z.form;if(V&&this.once(V,"bind-debounce"))V.addEventListener("submit",()=>{Array.from(new FormData(V).entries(),([L])=>{const x=V.querySelector(`[name="${L}"]`);this.incCycle(x,C0),this.deletePrivate(x,y0)})});if(this.once(Z,"bind-debounce"))Z.addEventListener("blur",()=>{clearTimeout(this.private(Z,y0)),this.triggerCycle(Z,C0)})}},triggerCycle(Z,$,Q){const[z,J]=this.private(Z,$);if(!Q)Q=z;if(Q===z)this.incCycle(Z,$),J()},once(Z,$){if(this.private(Z,$)===!0)return!1;return this.putPrivate(Z,$,!0),!0},incCycle(Z,$,Q=function(){}){let[z]=this.private(Z,$)||[0,Q];return z++,this.putPrivate(Z,$,[z,Q]),z},maintainPrivateHooks(Z,$,Q,z){if(Z.hasAttribute&&Z.hasAttribute("data-phx-hook")&&!$.hasAttribute("data-phx-hook"))$.setAttribute("data-phx-hook",Z.getAttribute("data-phx-hook"));if($.hasAttribute&&($.hasAttribute(Q)||$.hasAttribute(z)))$.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},putCustomElHook(Z,$){if(Z.isConnected)Z.setAttribute("data-phx-hook","");else console.error(`
        hook attached to non-connected DOM element
        ensure you are calling createHook within your connectedCallback. ${Z.outerHTML}
      `);this.putPrivate(Z,"custom-el-hook",$)},getCustomElHook(Z){return this.private(Z,"custom-el-hook")},isUsedInput(Z){return Z.nodeType===Node.ELEMENT_NODE&&(this.private(Z,e0)||this.private(Z,_0))},resetForm(Z){Array.from(Z.elements).forEach(($)=>{this.deletePrivate($,e0),this.deletePrivate($,_0)})},isPhxChild(Z){return Z.getAttribute&&Z.getAttribute(V0)},isPhxSticky(Z){return Z.getAttribute&&Z.getAttribute(I1)!==null},isChildOfAny(Z,$){return!!$.find((Q)=>Q.contains(Z))},firstPhxChild(Z){return this.isPhxChild(Z)?Z:this.all(Z,`[${V0}]`)[0]},isPortalTemplate(Z){return Z.tagName==="TEMPLATE"&&Z.hasAttribute(j5)},closestViewEl(Z){const $=Z.closest(`[${w0}],${h0}`);if(!$)return null;if($.hasAttribute(w0))return this.byId($.getAttribute(w0));else if($.hasAttribute(l))return $;return null},dispatchEvent(Z,$,Q={}){let z=!0;if(Z.nodeName==="INPUT"&&Z.type==="file"&&$==="click")z=!1;const q={bubbles:Q.bubbles===void 0?z:!!Q.bubbles,cancelable:!0,detail:Q.detail||{}},Y=$==="click"?new MouseEvent("click",q):new CustomEvent($,q);Z.dispatchEvent(Y)},cloneNode(Z,$){if(typeof $==="undefined")return Z.cloneNode(!0);else{const Q=Z.cloneNode(!1);return Q.innerHTML=$,Q}},mergeAttrs(Z,$,Q={}){const z=new Set(Q.exclude||[]),J=Q.isIgnored,W=$.attributes;for(let Y=W.length-1;Y>=0;Y--){const G=W[Y].name;if(!z.has(G)){const B=$.getAttribute(G);if(Z.getAttribute(G)!==B&&(!J||J&&G.startsWith("data-")))Z.setAttribute(G,B)}else if(G==="value"){const B=$.value??$.getAttribute(G);if(Z.value===B)Z.setAttribute("value",$.getAttribute(G))}}const q=Z.attributes;for(let Y=q.length-1;Y>=0;Y--){const G=q[Y].name;if(J){if(G.startsWith("data-")&&!$.hasAttribute(G)&&!p1.includes(G))Z.removeAttribute(G)}else if(!$.hasAttribute(G))Z.removeAttribute(G)}},mergeFocusedInput(Z,$){if(!(Z instanceof HTMLSelectElement))K0.mergeAttrs(Z,$,{exclude:["value"]});if($.readOnly)Z.setAttribute("readonly",!0);else Z.removeAttribute("readonly")},hasSelectionRange(Z){return Z.setSelectionRange&&(Z.type==="text"||Z.type==="textarea")},restoreFocus(Z,$,Q){if(Z instanceof HTMLSelectElement)Z.focus();if(!K0.isTextualInput(Z))return;if(!Z.matches(":focus"))Z.focus();if(this.hasSelectionRange(Z))Z.setSelectionRange($,Q)},isFormInput(Z){if(Z.localName&&customElements.get(Z.localName))return customElements.get(Z.localName).formAssociated;return/^(?:input|select|textarea)$/i.test(Z.tagName)&&Z.type!=="button"},syncAttrsToProps(Z){if(Z instanceof HTMLInputElement&&B5.indexOf(Z.type.toLocaleLowerCase())>=0)Z.checked=Z.getAttribute("checked")!==null},isTextualInput(Z){return f5.indexOf(Z.type)>=0},isNowTriggerFormExternal(Z,$){return Z.getAttribute&&Z.getAttribute($)!==null&&document.body.contains(Z)},cleanChildNodes(Z,$){if(K0.isPhxUpdate(Z,$,["append","prepend",o0])){const Q=[];Z.childNodes.forEach((z)=>{if(!z.id){if(!(z.nodeType===Node.TEXT_NODE&&z.nodeValue.trim()==="")&&z.nodeType!==Node.COMMENT_NODE)b(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(z.outerHTML||z.nodeValue).trim()}"

`);Q.push(z)}}),Q.forEach((z)=>z.remove())}},replaceRootContainer(Z,$,Q){const z=new Set(["id",l,M0,w1,G0]);if(Z.tagName.toLowerCase()===$.toLowerCase())return Array.from(Z.attributes).filter((J)=>!z.has(J.name.toLowerCase())).forEach((J)=>Z.removeAttribute(J.name)),Object.keys(Q).filter((J)=>!z.has(J.toLowerCase())).forEach((J)=>Z.setAttribute(J,Q[J])),Z;else{const J=document.createElement($);return Object.keys(Q).forEach((W)=>J.setAttribute(W,Q[W])),z.forEach((W)=>J.setAttribute(W,Z.getAttribute(W))),J.innerHTML=Z.innerHTML,Z.replaceWith(J),J}},getSticky(Z,$,Q){const z=(K0.private(Z,"sticky")||[]).find(([J])=>$===J);if(z){const[J,W,q]=z;return q}else return typeof Q==="function"?Q():Q},deleteSticky(Z,$){this.updatePrivate(Z,"sticky",[],(Q)=>{return Q.filter(([z,J])=>z!==$)})},putSticky(Z,$,Q){const z=Q(Z);this.updatePrivate(Z,"sticky",[],(J)=>{const W=J.findIndex(([q])=>$===q);if(W>=0)J[W]=[$,Q,z];else J.push([$,Q,z]);return J})},applyStickyOperations(Z){const $=K0.private(Z,"sticky");if(!$)return;$.forEach(([Q,z,J])=>this.putSticky(Z,Q,z))},isLocked(Z){return Z.hasAttribute&&Z.hasAttribute(y)}},j=K0,g0=class{static isActive(Z,$){const Q=$._phxRef===void 0,J=Z.getAttribute(X1).split(",").indexOf(g.genFileRef($))>=0;return $.size>0&&(Q||J)}static isPreflighted(Z,$){return Z.getAttribute(O1).split(",").indexOf(g.genFileRef($))>=0&&this.isActive(Z,$)}static isPreflightInProgress(Z){return Z._preflightInProgress===!0}static markPreflightInProgress(Z){Z._preflightInProgress=!0}constructor(Z,$,Q,z){this.ref=g.genFileRef($),this.fileEl=Z,this.file=$,this.view=Q,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(r0,this._onElUpdated),this.autoUpload=z}metadata(){return this.meta}progress(Z){if(this._progress=Math.floor(Z),this._progress>this._lastProgressSent)if(this._progress>=100)this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{g.untrackFile(this.fileEl,this.file),this._onDone()});else this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)}isCancelled(){return this._isCancelled}cancel(){this.file._preflightInProgress=!1,this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(Z="failed"){if(this.fileEl.removeEventListener(r0,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:Z}),!this.isAutoUpload())g.clearFiles(this.fileEl)}isAutoUpload(){return this.autoUpload}onDone(Z){this._onDone=()=>{this.fileEl.removeEventListener(r0,this._onElUpdated),Z()}}onElUpdated(){if(this.fileEl.getAttribute(X1).split(",").indexOf(this.ref)===-1)g.untrackFile(this.fileEl,this.file),this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref,meta:typeof this.file.meta==="function"?this.file.meta():void 0}}uploader(Z){if(this.meta.uploader){const $=Z[this.meta.uploader]||b(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:$}}else return{name:"channel",callback:z9}}zipPostFlight(Z){if(this.meta=Z.entries[this.ref],!this.meta)b(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:Z})}},W9=0,g=class Z{static genFileRef($){const Q=$._phxRef;if(Q!==void 0)return Q;else return $._phxRef=(W9++).toString(),$._phxRef}static getEntryDataURL($,Q,z){const J=this.activeFiles($).find((W)=>this.genFileRef(W)===Q);z(URL.createObjectURL(J))}static hasUploadsInProgress($){let Q=0;return j.findUploadInputs($).forEach((z)=>{if(z.getAttribute(O1)!==z.getAttribute(u5))Q++}),Q>0}static serializeUploads($){const Q=this.activeFiles($),z={};return Q.forEach((J)=>{const W={path:$.name},q=$.getAttribute(z0);if(z[q]=z[q]||[],W.ref=this.genFileRef(J),W.last_modified=J.lastModified,W.name=J.name||W.ref,W.relative_path=J.webkitRelativePath,W.type=J.type,W.size=J.size,typeof J.meta==="function")W.meta=J.meta();z[q].push(W)}),z}static clearFiles($){$.value=null,$.removeAttribute(z0),j.putPrivate($,"files",[])}static untrackFile($,Q){j.putPrivate($,"files",j.private($,"files").filter((z)=>!Object.is(z,Q)))}static trackFiles($,Q,z){if($.getAttribute("multiple")!==null){const J=Q.filter((W)=>!this.activeFiles($).find((q)=>Object.is(q,W)));j.updatePrivate($,"files",[],(W)=>W.concat(J)),$.value=null}else{if(z&&z.files.length>0)$.files=z.files;j.putPrivate($,"files",Q)}}static activeFileInputs($){const Q=j.findUploadInputs($);return Array.from(Q).filter((z)=>z.files&&this.activeFiles(z).length>0)}static activeFiles($){return(j.private($,"files")||[]).filter((Q)=>g0.isActive($,Q))}static inputsAwaitingPreflight($){const Q=j.findUploadInputs($);return Array.from(Q).filter((z)=>this.filesAwaitingPreflight(z).length>0)}static filesAwaitingPreflight($){return this.activeFiles($).filter((Q)=>!g0.isPreflighted($,Q)&&!g0.isPreflightInProgress(Q))}static markPreflightInProgress($){$.forEach((Q)=>g0.markPreflightInProgress(Q.file))}constructor($,Q,z){this.autoUpload=j.isAutoUpload($),this.view=Q,this.onComplete=z,this._entries=Array.from(Z.filesAwaitingPreflight($)||[]).map((J)=>new g0($,J,Q,this.autoUpload)),Z.markPreflightInProgress(this._entries),this.numEntriesInProgress=this._entries.length}isAutoUpload(){return this.autoUpload}entries(){return this._entries}initAdapterUpload($,Q,z){this._entries=this._entries.map((W)=>{if(W.isCancelled()){if(this.numEntriesInProgress--,this.numEntriesInProgress===0)this.onComplete()}else W.zipPostFlight($),W.onDone(()=>{if(this.numEntriesInProgress--,this.numEntriesInProgress===0)this.onComplete()});return W});const J=this._entries.reduce((W,q)=>{if(!q.meta)return W;const{name:Y,callback:G}=q.uploader(z.uploaders);return W[Y]=W[Y]||{callback:G,entries:[]},W[Y].entries.push(q),W},{});for(let W in J){const{callback:q,entries:Y}=J[W];q(Y,Q,$,z)}}},q9={anyOf(Z,$){return $.find((Q)=>Z instanceof Q)},isFocusable(Z,$){return Z instanceof HTMLAnchorElement&&Z.rel!=="ignore"||Z instanceof HTMLAreaElement&&Z.href!==void 0||!Z.disabled&&this.anyOf(Z,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||Z instanceof HTMLIFrameElement||Z.tabIndex>=0&&Z.getAttribute("aria-hidden")!=="true"||!$&&Z.getAttribute("tabindex")!==null&&Z.getAttribute("aria-hidden")!=="true"},attemptFocus(Z,$){if(this.isFocusable(Z,$))try{Z.focus()}catch{}return!!document.activeElement&&document.activeElement.isSameNode(Z)},focusFirstInteractive(Z){let $=Z.firstElementChild;while($){if(this.attemptFocus($,!0)||this.focusFirstInteractive($))return!0;$=$.nextElementSibling}},focusFirst(Z){let $=Z.firstElementChild;while($){if(this.attemptFocus($)||this.focusFirst($))return!0;$=$.nextElementSibling}},focusLast(Z){let $=Z.lastElementChild;while($){if(this.attemptFocus($)||this.focusLast($))return!0;$=$.previousElementSibling}}},m=q9,K5={LiveFileUpload:{activeRefs(){return this.el.getAttribute(X1)},preflightedRefs(){return this.el.getAttribute(O1)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){const Z=this.preflightedRefs();if(this.preflightedWas!==Z){if(this.preflightedWas=Z,Z==="")this.__view().cancelSubmit(this.el.form)}if(this.activeRefs()==="")this.el.value=null;this.el.dispatchEvent(new CustomEvent(r0))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(z0)),g.getEntryDataURL(this.inputEl,this.ref,(Z)=>{this.url=Z,this.el.src=Z})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){if(this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",(Z)=>{if(!Z.relatedTarget||!this.el.contains(Z.relatedTarget)){const $=Z.target.nextElementSibling;m.attemptFocus($)||m.focusFirst($)}else m.focusLast(this.el)}),this.focusEnd.addEventListener("focus",(Z)=>{if(!Z.relatedTarget||!this.el.contains(Z.relatedTarget)){const $=Z.target.previousElementSibling;m.attemptFocus($)||m.focusLast($)}else m.focusFirst(this.el)}),!this.el.contains(document.activeElement)){if(this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none")m.focusFirst(this.el)}}}},M5=(Z)=>{if(["HTML","BODY"].indexOf(Z.nodeName.toUpperCase())>=0)return null;if(["scroll","auto"].indexOf(getComputedStyle(Z).overflowY)>=0)return Z;return M5(Z.parentElement)},n1=(Z)=>{if(Z)return Z.scrollTop;else return document.documentElement.scrollTop||document.body.scrollTop},R1=(Z)=>{if(Z)return Z.getBoundingClientRect().bottom;else return window.innerHeight||document.documentElement.clientHeight},P1=(Z)=>{if(Z)return Z.getBoundingClientRect().top;else return 0},Y9=(Z,$)=>{const Q=Z.getBoundingClientRect();return Math.ceil(Q.top)>=P1($)&&Math.ceil(Q.left)>=0&&Math.floor(Q.top)<=R1($)},G9=(Z,$)=>{const Q=Z.getBoundingClientRect();return Math.ceil(Q.bottom)>=P1($)&&Math.ceil(Q.left)>=0&&Math.floor(Q.bottom)<=R1($)},a1=(Z,$)=>{const Q=Z.getBoundingClientRect();return Math.ceil(Q.top)>=P1($)&&Math.ceil(Q.left)>=0&&Math.floor(Q.top)<=R1($)};K5.InfiniteScroll={mounted(){this.scrollContainer=M5(this.el);let Z=n1(this.scrollContainer),$=!1;const Q=500;let z=null;const J=this.throttle(Q,(Y,G)=>{z=()=>!0,this.liveSocket.js().push(this.el,Y,{value:{id:G.id,_overran:!0},callback:()=>{z=null}})}),W=this.throttle(Q,(Y,G)=>{z=()=>G.scrollIntoView({block:"start"}),this.liveSocket.js().push(this.el,Y,{value:{id:G.id},callback:()=>{z=null,window.requestAnimationFrame(()=>{if(!a1(G,this.scrollContainer))G.scrollIntoView({block:"start"})})}})}),q=this.throttle(Q,(Y,G)=>{z=()=>G.scrollIntoView({block:"end"}),this.liveSocket.js().push(this.el,Y,{value:{id:G.id},callback:()=>{z=null,window.requestAnimationFrame(()=>{if(!a1(G,this.scrollContainer))G.scrollIntoView({block:"end"})})}})});if(this.onScroll=(Y)=>{const G=n1(this.scrollContainer);if(z)return Z=G,z();const B=this.el.getBoundingClientRect(),K=this.el.getAttribute(this.liveSocket.binding("viewport-top")),M=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),X=this.el.lastElementChild,F=this.el.firstElementChild,V=G<Z,L=G>Z;if(V&&K&&!$&&B.top>=0)$=!0,J(K,F);else if(L&&$&&B.top<=0)$=!1;if(K&&V&&Y9(F,this.scrollContainer))W(K,F);else if(M&&L&&G9(X,this.scrollContainer))q(M,X);Z=G},this.scrollContainer)this.scrollContainer.addEventListener("scroll",this.onScroll);else window.addEventListener("scroll",this.onScroll)},destroyed(){if(this.scrollContainer)this.scrollContainer.removeEventListener("scroll",this.onScroll);else window.removeEventListener("scroll",this.onScroll)},throttle(Z,$){let Q=0,z;return(...J)=>{const W=Date.now(),q=Z-(W-Q);if(q<=0||q>Z){if(z)clearTimeout(z),z=null;Q=W,$(...J)}else if(!z)z=setTimeout(()=>{Q=Date.now(),z=null,$(...J)},q)}}};var B9=K5,A1=class{static onUnlock(Z,$){if(!j.isLocked(Z)&&!Z.closest(`[${y}]`))return $();const Q=Z.closest(`[${y}]`),z=Q.closest(`[${y}]`).getAttribute(y);Q.addEventListener(`phx:undo-lock:${z}`,()=>{$()},{once:!0})}constructor(Z){this.el=Z,this.loadingRef=Z.hasAttribute(O0)?parseInt(Z.getAttribute(O0),10):null,this.lockRef=Z.hasAttribute(y)?parseInt(Z.getAttribute(y),10):null}maybeUndo(Z,$,Q){if(!this.isWithin(Z)){j.updatePrivate(this.el,y1,[],(z)=>{return z.push(Z),z});return}if(this.undoLocks(Z,$,Q),this.undoLoading(Z,$),j.updatePrivate(this.el,y1,[],(z)=>{return z.filter((J)=>{let W={detail:{ref:J,event:$},bubbles:!0,cancelable:!1};if(this.loadingRef&&this.loadingRef>J)this.el.dispatchEvent(new CustomEvent(`phx:undo-loading:${J}`,W));if(this.lockRef&&this.lockRef>J)this.el.dispatchEvent(new CustomEvent(`phx:undo-lock:${J}`,W));return J>Z})}),this.isFullyResolvedBy(Z))this.el.removeAttribute(d)}isWithin(Z){return!(this.loadingRef!==null&&this.loadingRef>Z&&this.lockRef!==null&&this.lockRef>Z)}undoLocks(Z,$,Q){if(!this.isLockUndoneBy(Z))return;const z=j.private(this.el,y);if(z)Q(z),j.deletePrivate(this.el,y);this.el.removeAttribute(y);const J={detail:{ref:Z,event:$},bubbles:!0,cancelable:!1};this.el.dispatchEvent(new CustomEvent(`phx:undo-lock:${this.lockRef}`,J))}undoLoading(Z,$){if(!this.isLoadingUndoneBy(Z)){if(this.canUndoLoading(Z)&&this.el.classList.contains("phx-submit-loading"))this.el.classList.remove("phx-change-loading");return}if(this.canUndoLoading(Z)){this.el.removeAttribute(O0);const Q=this.el.getAttribute(A0),z=this.el.getAttribute(x1);if(z!==null)this.el.readOnly=z==="true"?!0:!1,this.el.removeAttribute(x1);if(Q!==null)this.el.disabled=Q==="true"?!0:!1,this.el.removeAttribute(A0);const J=this.el.getAttribute(Z1);if(J!==null)this.el.innerText=J,this.el.removeAttribute(Z1);const W={detail:{ref:Z,event:$},bubbles:!0,cancelable:!1};this.el.dispatchEvent(new CustomEvent(`phx:undo-loading:${this.loadingRef}`,W))}W5.forEach((Q)=>{if(Q!=="phx-submit-loading"||this.canUndoLoading(Z))j.removeClass(this.el,Q)})}isLoadingUndoneBy(Z){return this.loadingRef===null?!1:this.loadingRef<=Z}isLockUndoneBy(Z){return this.lockRef===null?!1:this.lockRef<=Z}isFullyResolvedBy(Z){return(this.loadingRef===null||this.loadingRef<=Z)&&(this.lockRef===null||this.lockRef<=Z)}canUndoLoading(Z){return this.lockRef===null||this.lockRef<=Z}},j9=class{constructor(Z,$,Q){const z=new Set,J=new Set([...$.children].map((q)=>q.id)),W=[];Array.from(Z.children).forEach((q)=>{if(q.id){if(z.add(q.id),J.has(q.id)){const Y=q.previousElementSibling&&q.previousElementSibling.id;W.push({elementId:q.id,previousElementId:Y})}}}),this.containerId=$.id,this.updateType=Q,this.elementsToModify=W,this.elementIdsToAdd=[...J].filter((q)=>!z.has(q))}perform(){const Z=j.byId(this.containerId);if(!Z)return;if(this.elementsToModify.forEach(($)=>{if($.previousElementId)U0(document.getElementById($.previousElementId),(Q)=>{U0(document.getElementById($.elementId),(z)=>{if(!(z.previousElementSibling&&z.previousElementSibling.id==Q.id))Q.insertAdjacentElement("afterend",z)})});else U0(document.getElementById($.elementId),(Q)=>{if(Q.previousElementSibling!=null)Z.insertAdjacentElement("afterbegin",Q)})}),this.updateType=="prepend")this.elementIdsToAdd.reverse().forEach(($)=>{U0(document.getElementById($),(Q)=>Z.insertAdjacentElement("afterbegin",Q))})}},r1=11,d0,M9="http://www.w3.org/1999/xhtml",u=typeof document==="undefined"?void 0:document,U9=!!u&&"content"in u.createElement("template"),V9=!!u&&u.createRange&&"createContextualFragment"in u.createRange(),o1={OPTION:function(Z,$){var Q=Z.parentNode;if(Q){var z=Q.nodeName.toUpperCase();if(z==="OPTGROUP")Q=Q.parentNode,z=Q&&Q.nodeName.toUpperCase();if(z==="SELECT"&&!Q.hasAttribute("multiple")){if(Z.hasAttribute("selected")&&!$.selected)Z.setAttribute("selected","selected"),Z.removeAttribute("selected");Q.selectedIndex=-1}}V1(Z,$,"selected")},INPUT:function(Z,$){if(V1(Z,$,"checked"),V1(Z,$,"disabled"),Z.value!==$.value)Z.value=$.value;if(!$.hasAttribute("value"))Z.removeAttribute("value")},TEXTAREA:function(Z,$){var Q=$.value;if(Z.value!==Q)Z.value=Q;var z=Z.firstChild;if(z){var J=z.nodeValue;if(J==Q||!Q&&J==Z.placeholder)return;z.nodeValue=Q}},SELECT:function(Z,$){if(!$.hasAttribute("multiple")){var Q=-1,z=0,J=Z.firstChild,W,q;while(J)if(q=J.nodeName&&J.nodeName.toUpperCase(),q==="OPTGROUP"){if(W=J,J=W.firstChild,!J)J=W.nextSibling,W=null}else{if(q==="OPTION"){if(J.hasAttribute("selected")){Q=z;break}z++}if(J=J.nextSibling,!J&&W)J=W.nextSibling,W=null}Z.selectedIndex=Q}}},k0=1,l1=11,t1=3,e1=8,O9=H9(K9),H1=O9,n0=class{constructor(Z,$,Q,z,J,W,q={}){this.view=Z,this.liveSocket=Z.liveSocket,this.container=$,this.id=Q,this.rootID=Z.root.id,this.html=z,this.streams=J,this.streamInserts={},this.streamComponentRestore={},this.targetCID=W,this.cidPatch=$0(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.targetContainer=this.isCIDPatch()?this.targetCIDContainer(z):$,this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]},this.withChildren=q.withChildren||q.undoRef||!1,this.undoRef=q.undoRef}before(Z,$){this.callbacks[`before${Z}`].push($)}after(Z,$){this.callbacks[`after${Z}`].push($)}trackBefore(Z,...$){this.callbacks[`before${Z}`].forEach((Q)=>Q(...$))}trackAfter(Z,...$){this.callbacks[`after${Z}`].forEach((Q)=>Q(...$))}markPrunableContentForRemoval(){const Z=this.liveSocket.binding($1);j.all(this.container,`[${Z}=append] > *, [${Z}=prepend] > *`,($)=>{$.setAttribute(g1,"")})}perform(Z){const{view:$,liveSocket:Q,html:z,container:J}=this;let W=this.targetContainer;if(this.isCIDPatch()&&!this.targetContainer)return;if(this.isCIDPatch()){const I=W.closest(`[${y}]`);if(I){const S=j.private(I,y);if(S)W=S.querySelector(`[data-phx-component="${this.targetCID}"]`)}}const q=Q.getActiveElement(),{selectionStart:Y,selectionEnd:G}=q&&j.hasSelectionRange(q)?q:{},B=Q.binding($1),K=Q.binding(L1),M=Q.binding(D1),X=Q.binding(E5),F=[],V=[],L=[],x=[];let T=null;const p=(I,S,k=this.withChildren)=>{const v={childrenOnly:I.getAttribute(Q0)===null&&!k,getNodeKey:(U)=>{if(j.isPhxDestroyed(U))return null;if(Z)return U.id;return U.id||U.getAttribute&&U.getAttribute(G5)},skipFromChildren:(U)=>{return U.getAttribute(B)===o0},addChild:(U,D)=>{const{ref:E,streamAt:i}=this.getStreamInsert(D);if(E===void 0)return U.appendChild(D);if(this.setStreamRef(D,E),i===0)U.insertAdjacentElement("afterbegin",D);else if(i===-1){const O=U.lastElementChild;if(O&&!O.hasAttribute(N0)){const t=Array.from(U.children).find((c)=>!c.hasAttribute(N0));U.insertBefore(D,t)}else U.appendChild(D)}else if(i>0){const O=Array.from(U.children)[i];U.insertBefore(D,O)}},onBeforeNodeAdded:(U)=>{if(this.getStreamInsert(U)?.updateOnly&&!this.streamComponentRestore[U.id])return!1;j.maintainPrivateHooks(U,U,K,M),this.trackBefore("added",U);let D=U;if(this.streamComponentRestore[U.id])D=this.streamComponentRestore[U.id],delete this.streamComponentRestore[U.id],p(D,U,!0);return D},onNodeAdded:(U)=>{if(U.getAttribute)this.maybeReOrderStream(U,!0);if(j.isPortalTemplate(U))x.push(()=>this.teleport(U,p));if(U instanceof HTMLImageElement&&U.srcset)U.srcset=U.srcset;else if(U instanceof HTMLVideoElement&&U.autoplay)U.play();if(j.isNowTriggerFormExternal(U,X))T=U;if(j.isPhxChild(U)&&$.ownsElement(U)||j.isPhxSticky(U)&&$.ownsElement(U.parentNode))this.trackAfter("phxChildAdded",U);if(U.nodeName==="SCRIPT"&&U.hasAttribute(l0))this.handleRuntimeHook(U,S);F.push(U)},onNodeDiscarded:(U)=>this.onNodeDiscarded(U),onBeforeNodeDiscarded:(U)=>{if(U.getAttribute&&U.getAttribute(g1)!==null)return!0;if(U.parentElement!==null&&U.id&&j.isPhxUpdate(U.parentElement,B,[o0,"append","prepend"]))return!1;if(U.getAttribute&&U.getAttribute(w0))return!1;if(this.maybePendingRemove(U))return!1;if(this.skipCIDSibling(U))return!1;if(j.isPortalTemplate(U)){const D=document.getElementById(U.content.firstElementChild.id);if(D)D.remove(),v.onNodeDiscarded(D),this.view.dropPortalElementId(D.id)}return!0},onElUpdated:(U)=>{if(j.isNowTriggerFormExternal(U,X))T=U;V.push(U),this.maybeReOrderStream(U,!1)},onBeforeElUpdated:(U,D)=>{if(U.id&&U.isSameNode(I)&&U.id!==D.id)return v.onNodeDiscarded(U),U.replaceWith(D),v.onNodeAdded(D);if(j.syncPendingAttrs(U,D),j.maintainPrivateHooks(U,D,K,M),j.cleanChildNodes(D,B),this.skipCIDSibling(D))return this.maybeReOrderStream(U),!1;if(j.isPhxSticky(U))return[l,M0,G0].map((O)=>[O,U.getAttribute(O),D.getAttribute(O)]).forEach(([O,t,c])=>{if(c&&t!==c)U.setAttribute(O,c)}),!1;if(j.isIgnored(U,B)||U.form&&U.form.isSameNode(T))return this.trackBefore("updated",U,D),j.mergeAttrs(U,D,{isIgnored:j.isIgnored(U,B)}),V.push(U),j.applyStickyOperations(U),!1;if(U.type==="number"&&U.validity&&U.validity.badInput)return!1;const E=q&&U.isSameNode(q)&&j.isFormInput(U),i=E&&this.isChangedSelect(U,D);if(U.hasAttribute(d)){const O=new A1(U);if(O.lockRef&&(!this.undoRef||!O.isLockUndoneBy(this.undoRef))){if(j.isUploadInput(U))j.mergeAttrs(U,D,{isIgnored:!0}),this.trackBefore("updated",U,D),V.push(U);j.applyStickyOperations(U);const c=U.hasAttribute(y)?j.private(U,y)||U.cloneNode(!0):null;if(c){if(j.putPrivate(U,y,c),!E)U=c}}}if(j.isPhxChild(D)){const O=U.getAttribute(l);if(j.mergeAttrs(U,D,{exclude:[M0]}),O!=="")U.setAttribute(l,O);return U.setAttribute(G0,this.rootID),j.applyStickyOperations(U),!1}if(this.undoRef&&j.private(D,y))j.putPrivate(U,y,j.private(D,y));if(j.copyPrivates(D,U),j.isPortalTemplate(D))return x.push(()=>this.teleport(D,p)),!1;if(E&&U.type!=="hidden"&&!i)return this.trackBefore("updated",U,D),j.mergeFocusedInput(U,D),j.syncAttrsToProps(U),V.push(U),j.applyStickyOperations(U),!1;else{if(i)U.blur();if(j.isPhxUpdate(D,B,["append","prepend"]))L.push(new j9(U,D,D.getAttribute(B)));return j.syncAttrsToProps(D),j.applyStickyOperations(D),this.trackBefore("updated",U,D),U}}};H1(I,S,v)};if(this.trackBefore("added",J),this.trackBefore("updated",J,J),Q.time("morphdom",()=>{if(this.streams.forEach(([I,S,k,v])=>{if(S.forEach(([U,D,E,i])=>{this.streamInserts[U]={ref:I,streamAt:D,limit:E,reset:v,updateOnly:i}}),v!==void 0)j.all(J,`[${N0}="${I}"]`,(U)=>{this.removeStreamChildElement(U)});k.forEach((U)=>{const D=J.querySelector(`[id="${U}"]`);if(D)this.removeStreamChildElement(D)})}),Z)j.all(this.container,`[${B}=${o0}]`).filter((I)=>this.view.ownsElement(I)).forEach((I)=>{Array.from(I.children).forEach((S)=>{this.removeStreamChildElement(S,!0)})});p(W,z),x.forEach((I)=>I()),this.view.portalElementIds.forEach((I)=>{const S=document.getElementById(I);if(S){if(!document.getElementById(S.getAttribute(j1)))S.remove(),this.onNodeDiscarded(S),this.view.dropPortalElementId(I)}})}),Q.isDebugEnabled())e5(),Z9(this.streamInserts),Array.from(document.querySelectorAll("input[name=id]")).forEach((I)=>{if(I instanceof HTMLInputElement&&I.form)console.error('Detected an input with name="id" inside a form! This will cause problems when patching the DOM.\n',I)});if(L.length>0)Q.time("post-morph append/prepend restoration",()=>{L.forEach((I)=>I.perform())});if(Q.silenceEvents(()=>j.restoreFocus(q,Y,G)),j.dispatchEvent(document,"phx:update"),F.forEach((I)=>this.trackAfter("added",I)),V.forEach((I)=>this.trackAfter("updated",I)),this.transitionPendingRemoves(),T){Q.unload();const I=j.private(T,"submitter");if(I&&I.name&&W.contains(I)){const S=document.createElement("input");S.type="hidden";const k=I.getAttribute("form");if(k)S.setAttribute("form",k);S.name=I.name,S.value=I.value,I.parentElement.insertBefore(S,I)}Object.getPrototypeOf(T).submit.call(T)}return!0}onNodeDiscarded(Z){if(j.isPhxChild(Z)||j.isPhxSticky(Z))this.liveSocket.destroyViewByEl(Z);this.trackAfter("discarded",Z)}maybePendingRemove(Z){if(Z.getAttribute&&Z.getAttribute(this.phxRemove)!==null)return this.pendingRemoves.push(Z),!0;else return!1}removeStreamChildElement(Z,$=!1){if(!$&&!this.view.ownsElement(Z))return;if(this.streamInserts[Z.id])this.streamComponentRestore[Z.id]=Z,Z.remove();else if(!this.maybePendingRemove(Z))Z.remove(),this.onNodeDiscarded(Z)}getStreamInsert(Z){return(Z.id?this.streamInserts[Z.id]:{})||{}}setStreamRef(Z,$){j.putSticky(Z,N0,(Q)=>Q.setAttribute(N0,$))}maybeReOrderStream(Z,$){const{ref:Q,streamAt:z,reset:J}=this.getStreamInsert(Z);if(z===void 0)return;if(this.setStreamRef(Z,Q),!J&&!$)return;if(!Z.parentElement)return;if(z===0)Z.parentElement.insertBefore(Z,Z.parentElement.firstElementChild);else if(z>0){const W=Array.from(Z.parentElement.children),q=W.indexOf(Z);if(z>=W.length-1)Z.parentElement.appendChild(Z);else{const Y=W[z];if(q>z)Z.parentElement.insertBefore(Z,Y);else Z.parentElement.insertBefore(Z,Y.nextElementSibling)}}this.maybeLimitStream(Z)}maybeLimitStream(Z){const{limit:$}=this.getStreamInsert(Z),Q=$!==null&&Array.from(Z.parentElement.children);if($&&$<0&&Q.length>$*-1)Q.slice(0,Q.length+$).forEach((z)=>this.removeStreamChildElement(z));else if($&&$>=0&&Q.length>$)Q.slice($).forEach((z)=>this.removeStreamChildElement(z))}transitionPendingRemoves(){const{pendingRemoves:Z,liveSocket:$}=this;if(Z.length>0)$.transitionRemoves(Z,()=>{Z.forEach((Q)=>{const z=j.firstPhxChild(Q);if(z)$.destroyViewByEl(z);Q.remove()}),this.trackAfter("transitionsDiscarded",Z)})}isChangedSelect(Z,$){if(!(Z instanceof HTMLSelectElement)||Z.multiple)return!1;if(Z.options.length!==$.options.length)return!0;return $.value=Z.value,!Z.isEqualNode($)}isCIDPatch(){return this.cidPatch}skipCIDSibling(Z){return Z.nodeType===Node.ELEMENT_NODE&&Z.hasAttribute(Y5)}targetCIDContainer(Z){if(!this.isCIDPatch())return;const[$,...Q]=j.findComponentNodeList(this.view.id,this.targetCID);if(Q.length===0&&j.childNodeLength(Z)===1)return $;else return $&&$.parentNode}indexOf(Z,$){return Array.from(Z.children).indexOf($)}teleport(Z,$){const Q=Z.getAttribute(j5),z=document.querySelector(Q);if(!z)throw new Error("portal target with selector "+Q+" not found");const J=Z.content.firstElementChild;if(this.skipCIDSibling(J))return;if(!J?.id)throw new Error("phx-portal template must have a single root element with ID!");const W=document.getElementById(J.id);let q;if(W){if(!z.contains(W))z.appendChild(W);q=W}else q=document.createElement(J.tagName),z.appendChild(q);J.setAttribute(w0,this.view.id),J.setAttribute(j1,Z.id),$(q,J,!0),J.removeAttribute(w0),J.removeAttribute(j1),this.view.pushPortalElementId(J.id)}handleRuntimeHook(Z,$){const Q=Z.getAttribute(l0);let z=Z.hasAttribute("nonce")?Z.getAttribute("nonce"):null;if(Z.hasAttribute("nonce")){const W=document.createElement("template");W.innerHTML=$,z=W.content.querySelector(`script[${l0}="${CSS.escape(Q)}"]`).getAttribute("nonce")}const J=document.createElement("script");if(J.textContent=Z.textContent,j.mergeAttrs(J,Z,{isIgnored:!1}),z)J.nonce=z;Z.replaceWith(J),Z=J}},w9=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),R9=new Set(["'",'"']),Z5=(Z,$,Q)=>{let z=0,J=!1,W,q,Y,G,B,K;const M=Z.match(/^(\s*(?:<!--.*?-->\s*)*)<([^\s\/>]+)/);if(M===null)throw new Error(`malformed html ${Z}`);z=M[0].length,W=M[1],Y=M[2],G=z;for(z;z<Z.length;z++){if(Z.charAt(z)===">")break;if(Z.charAt(z)==="="){const V=Z.slice(z-3,z)===" id";z++;const L=Z.charAt(z);if(R9.has(L)){const x=z;z++;for(z;z<Z.length;z++)if(Z.charAt(z)===L)break;if(V){B=Z.slice(x+1,z);break}}}}let X=Z.length-1;J=!1;while(X>=W.length+Y.length){const V=Z.charAt(X);if(J)if(V==="-"&&Z.slice(X-3,X)==="<!-")J=!1,X-=4;else X-=1;else if(V===">"&&Z.slice(X-2,X)==="--")J=!0,X-=3;else if(V===">")break;else X-=1}q=Z.slice(X+1,Z.length);const F=Object.keys($).map((V)=>$[V]===!0?V:`${V}="${$[V]}"`).join(" ");if(Q){const V=B?` id="${B}"`:"";if(w9.has(Y))K=`<${Y}${V}${F===""?"":" "}${F}/>`;else K=`<${Y}${V}${F===""?"":" "}${F}></${Y}>`}else{const V=Z.slice(G,X+1);K=`<${Y}${F===""?"":" "}${F}${V}`}return[K,W,q]},$5=class{static extract(Z){const{[s1]:$,[c1]:Q,[d1]:z}=Z;return delete Z[s1],delete Z[c1],delete Z[d1],{diff:Z,title:z,reply:$||null,events:Q||[]}}constructor(Z,$){this.viewId=Z,this.rendered={},this.magicId=0,this.mergeDiff($)}parentViewId(){return this.viewId}toString(Z){const{buffer:$,streams:Q}=this.recursiveToString(this.rendered,this.rendered[_],Z,!0,{});return{buffer:$,streams:Q}}recursiveToString(Z,$=Z[_],Q,z,J){Q=Q?new Set(Q):null;const W={buffer:"",components:$,onlyCids:Q,streams:new Set};return this.toOutputBuffer(Z,null,W,z,J),{buffer:W.buffer,streams:W.streams}}componentCIDs(Z){return Object.keys(Z[_]||{}).map(($)=>parseInt($))}isComponentOnlyDiff(Z){if(!Z[_])return!1;return Object.keys(Z).length===1}getComponent(Z,$){return Z[_][$]}resetRender(Z){if(this.rendered[_][Z])this.rendered[_][Z].reset=!0}mergeDiff(Z){const $=Z[_],Q={};if(delete Z[_],this.rendered=this.mutableMerge(this.rendered,Z),this.rendered[_]=this.rendered[_]||{},$){const z=this.rendered[_];for(let J in $)$[J]=this.cachedFindComponent(J,$[J],z,$,Q);for(let J in $)z[J]=$[J];Z[_]=$}}cachedFindComponent(Z,$,Q,z,J){if(J[Z])return J[Z];else{let W,q,Y=$[s];if($0(Y)){let G;if(Y>0)G=this.cachedFindComponent(Y,z[Y],Q,z,J);else G=Q[-Y];q=G[s],W=this.cloneMerge(G,$,!0),W[s]=q}else W=$[s]!==void 0||Q[Z]===void 0?$:this.cloneMerge(Q[Z],$,!1);return J[Z]=W,W}}mutableMerge(Z,$){if($[s]!==void 0)return $;else return this.doMutableMerge(Z,$),Z}doMutableMerge(Z,$){if($[C])this.mergeKeyed(Z,$);else for(let Q in $){const z=$[Q],J=Z[Q];if(I0(z)&&z[s]===void 0&&I0(J))this.doMutableMerge(J,z);else Z[Q]=z}if(Z[U1])Z.newRender=!0}clone(Z){if("structuredClone"in window)return structuredClone(Z);else return JSON.parse(JSON.stringify(Z))}mergeKeyed(Z,$){const Q=this.clone(Z);if(Object.entries($[C]).forEach(([z,J])=>{if(z===o)return;if(Array.isArray(J)){const[W,q]=J;Z[C][z]=Q[C][W],this.doMutableMerge(Z[C][z],q)}else if(typeof J==="number"){const W=J;Z[C][z]=Q[C][W]}else if(typeof J==="object"){if(!Z[C][z])Z[C][z]={};this.doMutableMerge(Z[C][z],J)}}),$[C][o]<Z[C][o])for(let z=$[C][o];z<Z[C][o];z++)delete Z[C][z];if(Z[C][o]=$[C][o],$[D0])Z[D0]=$[D0];if($[q0])Z[q0]=$[q0]}cloneMerge(Z,$,Q){const z={...Z,...$};for(let J in z){const W=$[J],q=Z[J];if(I0(W)&&W[s]===void 0&&I0(q))z[J]=this.cloneMerge(q,W,Q);else if(W===void 0&&I0(q))z[J]=this.cloneMerge(q,{},Q)}if(Q)delete z.magicId,delete z.newRender;else if(Z[U1])z.newRender=!0;return z}componentToString(Z){const{buffer:$,streams:Q}=this.recursiveCIDToString(this.rendered[_],Z,null),[z,J,W]=Z5($,{});return{buffer:z,streams:Q}}pruneCIDs(Z){Z.forEach(($)=>delete this.rendered[_][$])}get(){return this.rendered}isNewFingerprint(Z={}){return!!Z[s]}templateStatic(Z,$){if(typeof Z==="number")return $[Z];else return Z}nextMagicID(){return this.magicId++,`m${this.magicId}-${this.parentViewId()}`}toOutputBuffer(Z,$,Q,z,J={}){if(Z[C])return this.comprehensionToBuffer(Z,$,Q,z);if(Z[q0])$=Z[q0],delete Z[q0];let{[s]:W}=Z;W=this.templateStatic(W,$),Z[s]=W;const q=Z[U1],Y=Q.buffer;if(q)Q.buffer="";if(z&&q&&!Z.magicId)Z.newRender=!0,Z.magicId=this.nextMagicID();Q.buffer+=W[0];for(let G=1;G<W.length;G++)this.dynamicToBuffer(Z[G-1],$,Q,z),Q.buffer+=W[G];if(q){let G=!1,B;if(z||Z.magicId)G=z&&!Z.newRender,B={[G5]:Z.magicId,...J};else B=J;if(G)B[Y5]=!0;const[K,M,X]=Z5(Q.buffer,B,G);Z.newRender=!1,Q.buffer=Y+M+K+X}}comprehensionToBuffer(Z,$,Q,z){const J=$||Z[q0],W=this.templateStatic(Z[s],$);Z[s]=W,delete Z[q0];for(let q=0;q<Z[C][o];q++){Q.buffer+=W[0];for(let Y=1;Y<W.length;Y++)this.dynamicToBuffer(Z[C][q][Y-1],J,Q,z),Q.buffer+=W[Y]}if(Z[D0]){const q=Z[D0],[Y,G,B,K]=q||[null,{},[],null];if(q!==void 0&&(Z[C][o]>0||B.length>0||K))delete Z[D0],Z[C]={[o]:0},Q.streams.add(q)}}dynamicToBuffer(Z,$,Q,z){if(typeof Z==="number"){const{buffer:J,streams:W}=this.recursiveCIDToString(Q.components,Z,Q.onlyCids);Q.buffer+=J,Q.streams=new Set([...Q.streams,...W])}else if(I0(Z))this.toOutputBuffer(Z,$,Q,z,{});else Q.buffer+=Z}recursiveCIDToString(Z,$,Q){const z=Z[$]||b(`no component for CID ${$}`,Z),J={[Q0]:$,[H0]:this.viewId},W=Q&&!Q.has($);z.newRender=!W,z.magicId=`c${$}-${this.parentViewId()}`;const q=!z.reset,{buffer:Y,streams:G}=this.recursiveToString(z,Z,Q,q,J);return delete z.reset,{buffer:Y,streams:G}}},Q5=[],z5=200,P9={exec(Z,$,Q,z,J,W){const[q,Y]=W||[null,{callback:W&&W.callback}];(Q.charAt(0)==="["?JSON.parse(Q):[[q,Y]]).forEach(([B,K])=>{if(B===q)K={...Y,...K},K.callback=K.callback||Y.callback;this.filterToEls(z.liveSocket,J,K).forEach((M)=>{this[`exec_${B}`](Z,$,Q,z,J,M,K)})})},isVisible(Z){return!!(Z.offsetWidth||Z.offsetHeight||Z.getClientRects().length>0)},isInViewport(Z){const $=Z.getBoundingClientRect(),Q=window.innerHeight||document.documentElement.clientHeight,z=window.innerWidth||document.documentElement.clientWidth;return $.right>0&&$.bottom>0&&$.left<z&&$.top<Q},exec_exec(Z,$,Q,z,J,W,{attr:q,to:Y}){const G=W.getAttribute(q);if(!G)throw new Error(`expected ${q} to contain JS command on "${Y}"`);z.liveSocket.execJS(W,G,$)},exec_dispatch(Z,$,Q,z,J,W,{event:q,detail:Y,bubbles:G,blocking:B}){if(Y=Y||{},Y.dispatcher=J,B){const K=new Promise((M,X)=>{Y.done=M});z.liveSocket.asyncTransition(K)}j.dispatchEvent(W,q,{detail:Y,bubbles:G})},exec_push(Z,$,Q,z,J,W,q){const{event:Y,data:G,target:B,page_loading:K,loading:M,value:X,dispatcher:F,callback:V}=q,L={loading:M,value:X,target:B,page_loading:!!K,originalEvent:Z},x=$==="change"&&F?F:J,T=B||x.getAttribute(z.binding("target"))||x,p=(I,S)=>{if(!I.isConnected())return;if($==="change"){let{newCid:k,_target:v}=q;if(v=v||(j.isFormInput(J)?J.name:void 0),v)L._target=v;I.pushInput(J,S,k,Y||Q,L,V)}else if($==="submit"){const{submitter:k}=q;I.submitForm(J,S,Y||Q,k,L,V)}else I.pushEvent($,J,S,Y||Q,G,L,V)};if(q.targetView&&q.targetCtx)p(q.targetView,q.targetCtx);else z.withinTargets(T,p)},exec_navigate(Z,$,Q,z,J,W,{href:q,replace:Y}){z.liveSocket.historyRedirect(Z,q,Y?"replace":"push",null,J)},exec_patch(Z,$,Q,z,J,W,{href:q,replace:Y}){z.liveSocket.pushHistoryPatch(Z,q,Y?"replace":"push",J)},exec_focus(Z,$,Q,z,J,W){m.attemptFocus(W),window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>m.attemptFocus(W))})},exec_focus_first(Z,$,Q,z,J,W){m.focusFirstInteractive(W)||m.focusFirst(W),window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>m.focusFirstInteractive(W)||m.focusFirst(W))})},exec_push_focus(Z,$,Q,z,J,W){Q5.push(W||J)},exec_pop_focus(Z,$,Q,z,J,W){const q=Q5.pop();if(q)q.focus(),window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>q.focus())})},exec_add_class(Z,$,Q,z,J,W,{names:q,transition:Y,time:G,blocking:B}){this.addOrRemoveClasses(W,q,[],Y,G,z,B)},exec_remove_class(Z,$,Q,z,J,W,{names:q,transition:Y,time:G,blocking:B}){this.addOrRemoveClasses(W,[],q,Y,G,z,B)},exec_toggle_class(Z,$,Q,z,J,W,{names:q,transition:Y,time:G,blocking:B}){this.toggleClasses(W,q,Y,G,z,B)},exec_toggle_attr(Z,$,Q,z,J,W,{attr:[q,Y,G]}){this.toggleAttr(W,q,Y,G)},exec_ignore_attrs(Z,$,Q,z,J,W,{attrs:q}){this.ignoreAttrs(W,q)},exec_transition(Z,$,Q,z,J,W,{time:q,transition:Y,blocking:G}){this.addOrRemoveClasses(W,[],[],Y,q,z,G)},exec_toggle(Z,$,Q,z,J,W,{display:q,ins:Y,outs:G,time:B,blocking:K}){this.toggle($,z,W,q,Y,G,B,K)},exec_show(Z,$,Q,z,J,W,{display:q,transition:Y,time:G,blocking:B}){this.show($,z,W,q,Y,G,B)},exec_hide(Z,$,Q,z,J,W,{display:q,transition:Y,time:G,blocking:B}){this.hide($,z,W,q,Y,G,B)},exec_set_attr(Z,$,Q,z,J,W,{attr:[q,Y]}){this.setOrRemoveAttrs(W,[[q,Y]],[])},exec_remove_attr(Z,$,Q,z,J,W,{attr:q}){this.setOrRemoveAttrs(W,[],[q])},ignoreAttrs(Z,$){j.putPrivate(Z,"JS:ignore_attrs",{apply:(Q,z)=>{Array.from(Q.attributes).forEach((J)=>{if($.some((W)=>J.name==W||W.includes("*")&&J.name.match(W)!=null))z.setAttribute(J.name,J.value)})}})},onBeforeElUpdated(Z,$){const Q=j.private(Z,"JS:ignore_attrs");if(Q)Q.apply(Z,$)},show(Z,$,Q,z,J,W,q){if(!this.isVisible(Q))this.toggle(Z,$,Q,z,J,null,W,q)},hide(Z,$,Q,z,J,W,q){if(this.isVisible(Q))this.toggle(Z,$,Q,z,null,J,W,q)},toggle(Z,$,Q,z,J,W,q,Y){q=q||z5;const[G,B,K]=J||[[],[],[]],[M,X,F]=W||[[],[],[]];if(G.length>0||M.length>0)if(this.isVisible(Q)){const V=()=>{this.addOrRemoveClasses(Q,X,G.concat(B).concat(K)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(Q,M,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(Q,F,X))})},L=()=>{this.addOrRemoveClasses(Q,[],M.concat(F)),j.putSticky(Q,"toggle",(x)=>x.style.display="none"),Q.dispatchEvent(new Event("phx:hide-end"))};if(Q.dispatchEvent(new Event("phx:hide-start")),Y===!1)V(),setTimeout(L,q);else $.transition(q,V,L)}else{if(Z==="remove")return;const V=()=>{this.addOrRemoveClasses(Q,B,M.concat(X).concat(F));const x=z||this.defaultDisplay(Q);window.requestAnimationFrame(()=>{this.addOrRemoveClasses(Q,G,[]),window.requestAnimationFrame(()=>{j.putSticky(Q,"toggle",(T)=>T.style.display=x),this.addOrRemoveClasses(Q,K,B)})})},L=()=>{this.addOrRemoveClasses(Q,[],G.concat(K)),Q.dispatchEvent(new Event("phx:show-end"))};if(Q.dispatchEvent(new Event("phx:show-start")),Y===!1)V(),setTimeout(L,q);else $.transition(q,V,L)}else if(this.isVisible(Q))window.requestAnimationFrame(()=>{Q.dispatchEvent(new Event("phx:hide-start")),j.putSticky(Q,"toggle",(V)=>V.style.display="none"),Q.dispatchEvent(new Event("phx:hide-end"))});else window.requestAnimationFrame(()=>{Q.dispatchEvent(new Event("phx:show-start"));const V=z||this.defaultDisplay(Q);j.putSticky(Q,"toggle",(L)=>L.style.display=V),Q.dispatchEvent(new Event("phx:show-end"))})},toggleClasses(Z,$,Q,z,J,W){window.requestAnimationFrame(()=>{const[q,Y]=j.getSticky(Z,"classes",[[],[]]),G=$.filter((K)=>q.indexOf(K)<0&&!Z.classList.contains(K)),B=$.filter((K)=>Y.indexOf(K)<0&&Z.classList.contains(K));this.addOrRemoveClasses(Z,G,B,Q,z,J,W)})},toggleAttr(Z,$,Q,z){if(Z.hasAttribute($))if(z!==void 0)if(Z.getAttribute($)===Q)this.setOrRemoveAttrs(Z,[[$,z]],[]);else this.setOrRemoveAttrs(Z,[[$,Q]],[]);else this.setOrRemoveAttrs(Z,[],[$]);else this.setOrRemoveAttrs(Z,[[$,Q]],[])},addOrRemoveClasses(Z,$,Q,z,J,W,q){J=J||z5;const[Y,G,B]=z||[[],[],[]];if(Y.length>0){const K=()=>{this.addOrRemoveClasses(Z,G,[].concat(Y).concat(B)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(Z,Y,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(Z,B,G))})},M=()=>this.addOrRemoveClasses(Z,$.concat(B),Q.concat(Y).concat(G));if(q===!1)K(),setTimeout(M,J);else W.transition(J,K,M);return}window.requestAnimationFrame(()=>{const[K,M]=j.getSticky(Z,"classes",[[],[]]),X=$.filter((x)=>K.indexOf(x)<0&&!Z.classList.contains(x)),F=Q.filter((x)=>M.indexOf(x)<0&&Z.classList.contains(x)),V=K.filter((x)=>Q.indexOf(x)<0).concat(X),L=M.filter((x)=>$.indexOf(x)<0).concat(F);j.putSticky(Z,"classes",(x)=>{return x.classList.remove(...L),x.classList.add(...V),[V,L]})})},setOrRemoveAttrs(Z,$,Q){const[z,J]=j.getSticky(Z,"attrs",[[],[]]),W=$.map(([G,B])=>G).concat(Q),q=z.filter(([G,B])=>!W.includes(G)).concat($),Y=J.filter((G)=>!W.includes(G)).concat(Q);j.putSticky(Z,"attrs",(G)=>{return Y.forEach((B)=>G.removeAttribute(B)),q.forEach(([B,K])=>G.setAttribute(B,K)),[q,Y]})},hasAllClasses(Z,$){return $.every((Q)=>Z.classList.contains(Q))},isToggledOut(Z,$){return!this.isVisible(Z)||this.hasAllClasses(Z,$)},filterToEls(Z,$,{to:Q}){const z=()=>{if(typeof Q==="string")return document.querySelectorAll(Q);else if(Q.closest){const J=$.closest(Q.closest);return J?[J]:[]}else if(Q.inner)return $.querySelectorAll(Q.inner)};return Q?Z.jsQuerySelectorAll($,Q,z):[$]},defaultDisplay(Z){return{tr:"table-row",td:"table-cell"}[Z.tagName.toLowerCase()]||"block"},transitionClasses(Z){if(!Z)return null;let[$,Q,z]=Array.isArray(Z)?Z:[Z.split(" "),[],[]];return $=Array.isArray($)?$:$.split(" "),Q=Array.isArray(Q)?Q:Q.split(" "),z=Array.isArray(z)?z:z.split(" "),[$,Q,z]}},R=P9,U5=(Z,$)=>{return{exec(Q,z){Z.execJS(Q,z,$)},show(Q,z={}){const J=Z.owner(Q);R.show($,J,Q,z.display,R.transitionClasses(z.transition),z.time,z.blocking)},hide(Q,z={}){const J=Z.owner(Q);R.hide($,J,Q,null,R.transitionClasses(z.transition),z.time,z.blocking)},toggle(Q,z={}){const J=Z.owner(Q),W=R.transitionClasses(z.in),q=R.transitionClasses(z.out);R.toggle($,J,Q,z.display,W,q,z.time,z.blocking)},addClass(Q,z,J={}){const W=Array.isArray(z)?z:z.split(" "),q=Z.owner(Q);R.addOrRemoveClasses(Q,W,[],R.transitionClasses(J.transition),J.time,q,J.blocking)},removeClass(Q,z,J={}){const W=Array.isArray(z)?z:z.split(" "),q=Z.owner(Q);R.addOrRemoveClasses(Q,[],W,R.transitionClasses(J.transition),J.time,q,J.blocking)},toggleClass(Q,z,J={}){const W=Array.isArray(z)?z:z.split(" "),q=Z.owner(Q);R.toggleClasses(Q,W,R.transitionClasses(J.transition),J.time,q,J.blocking)},transition(Q,z,J={}){const W=Z.owner(Q);R.addOrRemoveClasses(Q,[],[],R.transitionClasses(z),J.time,W,J.blocking)},setAttribute(Q,z,J){R.setOrRemoveAttrs(Q,[[z,J]],[])},removeAttribute(Q,z){R.setOrRemoveAttrs(Q,[],[z])},toggleAttribute(Q,z,J,W){R.toggleAttr(Q,z,J,W)},push(Q,z,J={}){Z.withinOwners(Q,(W)=>{const q=J.value||{};delete J.value;let Y=new CustomEvent("phx:exec",{detail:{sourceElement:Q}});R.exec(Y,$,z,W,Q,["push",{data:q,...J}])})},navigate(Q,z={}){const J=new CustomEvent("phx:exec");Z.historyRedirect(J,Q,z.replace?"replace":"push",null,null)},patch(Q,z={}){const J=new CustomEvent("phx:exec");Z.pushHistoryPatch(J,Q,z.replace?"replace":"push",null)},ignoreAttributes(Q,z){R.ignoreAttrs(Q,Array.isArray(z)?z:[z])}}},F1="hookId",S9=1,x0=class Z{static makeID(){return S9++}static elementID($){return j.private($,F1)}constructor($,Q,z){if(this.el=Q,this.__attachView($),this.__listeners=new Set,this.__isDisconnected=!1,j.putPrivate(this.el,F1,Z.makeID()),z){const J=new Set(["el","liveSocket","__view","__listeners","__isDisconnected","constructor","js","pushEvent","pushEventTo","handleEvent","removeHandleEvent","upload","uploadTo","__mounted","__updated","__beforeUpdate","__destroyed","__reconnected","__disconnected","__cleanup__"]);for(let q in z)if(Object.prototype.hasOwnProperty.call(z,q)){if(this[q]=z[q],J.has(q))console.warn(`Hook object for element #${Q.id} overwrites core property '${q}'!`)}["mounted","beforeUpdate","updated","destroyed","disconnected","reconnected"].forEach((q)=>{if(z[q]&&typeof z[q]==="function")this[q]=z[q]})}}__attachView($){if($)this.__view=()=>$,this.liveSocket=$.liveSocket;else this.__view=()=>{throw new Error(`hook not yet attached to a live view: ${this.el.outerHTML}`)},this.liveSocket=null}mounted(){}beforeUpdate(){}updated(){}destroyed(){}disconnected(){}reconnected(){}__mounted(){this.mounted()}__updated(){this.updated()}__beforeUpdate(){this.beforeUpdate()}__destroyed(){this.destroyed(),j.deletePrivate(this.el,F1)}__reconnected(){if(this.__isDisconnected)this.__isDisconnected=!1,this.reconnected()}__disconnected(){this.__isDisconnected=!0,this.disconnected()}js(){return{...U5(this.__view().liveSocket,"hook"),exec:($)=>{this.__view().liveSocket.execJS(this.el,$,"hook")}}}pushEvent($,Q,z){const J=this.__view().pushHookEvent(this.el,null,$,Q||{});if(z===void 0)return J.then(({reply:W})=>W);J.then(({reply:W,ref:q})=>z(W,q)).catch(()=>{});return}pushEventTo($,Q,z,J){if(J===void 0){const W=[];this.__view().withinTargets($,(Y,G)=>{W.push({view:Y,targetCtx:G})});const q=W.map(({view:Y,targetCtx:G})=>{return Y.pushHookEvent(this.el,G,Q,z||{})});return Promise.allSettled(q)}this.__view().withinTargets($,(W,q)=>{W.pushHookEvent(this.el,q,Q,z||{}).then(({reply:Y,ref:G})=>J(Y,G)).catch(()=>{})});return}handleEvent($,Q){const z={event:$,callback:(J)=>Q(J.detail)};return window.addEventListener(`phx:${$}`,z.callback),this.__listeners.add(z),z}removeHandleEvent($){window.removeEventListener(`phx:${$.event}`,$.callback),this.__listeners.delete($)}upload($,Q){return this.__view().dispatchUploads(null,$,Q)}uploadTo($,Q,z){return this.__view().withinTargets($,(J,W)=>{J.dispatchUploads(W,Q,z)})}__cleanup__(){this.__listeners.forEach(($)=>this.removeHandleEvent($))}},b9=(Z,$)=>{const Q=Z.endsWith("[]");let z=Q?Z.slice(0,-2):Z;if(z=z.replace(/([^\[\]]+)(\]?$)/,`${$}\$1\$2`),Q)z+="[]";return z},a0=(Z,$,Q=[])=>{const{submitter:z}=$;let J;if(z&&z.name){const K=document.createElement("input");K.type="hidden";const M=z.getAttribute("form");if(M)K.setAttribute("form",M);K.name=z.name,K.value=z.value,z.parentElement.insertBefore(K,z),J=K}const W=new FormData(Z),q=[];W.forEach((K,M,X)=>{if(K instanceof File)q.push(M)}),q.forEach((K)=>W.delete(K));const Y=new URLSearchParams,{inputsUnused:G,onlyHiddenInputs:B}=Array.from(Z.elements).reduce((K,M)=>{const{inputsUnused:X,onlyHiddenInputs:F}=K,V=M.name;if(!V)return K;if(X[V]===void 0)X[V]=!0;if(F[V]===void 0)F[V]=!0;const L=j.private(M,e0)||j.private(M,_0),x=M.type==="hidden";return X[V]=X[V]&&!L,F[V]=F[V]&&x,K},{inputsUnused:{},onlyHiddenInputs:{}});for(let[K,M]of W.entries())if(Q.length===0||Q.indexOf(K)>=0){const X=G[K],F=B[K];if(X&&!(z&&z.name==K)&&!F)Y.append(b9(K,"_unused_"),"");if(typeof M==="string")Y.append(K,M)}if(z&&J)z.parentElement.removeChild(J);return Y.toString()},N9=class Z{static closestView($){const Q=$.closest(h0);return Q?j.private(Q,"view"):null}constructor($,Q,z,J,W){this.isDead=!1,this.liveSocket=Q,this.flash=J,this.parent=z,this.root=z?z.root:this,this.el=$;const q=j.private(this.el,"view");if(q!==void 0&&q.isDead!==!0)throw b(`The DOM element for this view has already been bound to a view.

        An element can only ever be associated with a single view!
        Please ensure that you are not trying to initialize multiple LiveSockets on the same page.
        This could happen if you're accidentally trying to render your root layout more than once.
        Ensure that the template set on the LiveView is different than the root layout.
      `,{view:q}),new Error("Cannot bind multiple views to the same DOM element.");j.putPrivate(this.el,"view",this),this.id=this.el.id,this.ref=0,this.lastAckRef=null,this.childJoins=0,this.loaderTimer=null,this.disconnectedTimer=null,this.pendingDiffs=[],this.pendingForms=new Set,this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinAttempts=0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(Y){Y&&Y()},this.stopCallback=function(){},this.pendingJoinOps=[],this.viewHooks={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.formsForRecovery={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>{const Y=this.href&&this.expandURL(this.href);return{redirect:this.redirect?Y:void 0,url:this.redirect?void 0:Y||void 0,params:this.connectParams(W),session:this.getSession(),static:this.getStatic(),flash:this.flash,sticky:this.el.hasAttribute(I1)}}),this.portalElementIds=new Set}setHref($){this.href=$}setRedirect($){this.redirect=!0,this.href=$}isMain(){return this.el.hasAttribute(w1)}connectParams($){const Q=this.liveSocket.params(this.el),z=j.all(document,`[${this.binding(_5)}]`).map((J)=>J.src||J.href).filter((J)=>typeof J==="string");if(z.length>0)Q._track_static=z;return Q._mounts=this.joinCount,Q._mount_attempts=this.joinAttempts,Q._live_referer=$,this.joinAttempts++,Q}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(l)}getStatic(){const $=this.el.getAttribute(M0);return $===""?null:$}destroy($=function(){}){if(this.destroyAllChildren(),this.destroyPortalElements(),this.destroyed=!0,j.deletePrivate(this.el,"view"),delete this.root.children[this.id],this.parent)delete this.root.children[this.parent.id][this.id];clearTimeout(this.loaderTimer);const Q=()=>{$();for(let z in this.viewHooks)this.destroyHook(this.viewHooks[z])};j.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",Q).receive("error",Q).receive("timeout",Q)}setContainerClasses(...$){this.el.classList.remove(k1,j0,L0,v1,S0),this.el.classList.add(...$)}showLoader($){if(clearTimeout(this.loaderTimer),$)this.loaderTimer=setTimeout(()=>this.showLoader(),$);else{for(let Q in this.viewHooks)this.viewHooks[Q].__disconnected();this.setContainerClasses(j0)}}execAll($){j.all(this.el,`[${$}]`,(Q)=>this.liveSocket.execJS(Q,Q.getAttribute($)))}hideLoader(){clearTimeout(this.loaderTimer),clearTimeout(this.disconnectedTimer),this.setContainerClasses(k1),this.execAll(this.binding("connected"))}triggerReconnected(){for(let $ in this.viewHooks)this.viewHooks[$].__reconnected()}log($,Q){this.liveSocket.log(this,$,Q)}transition($,Q,z=function(){}){this.liveSocket.transition($,Q,z)}withinTargets($,Q,z=document){if($ instanceof HTMLElement||$ instanceof SVGElement)return this.liveSocket.owner($,(J)=>Q(J,$));if($0($))if(j.findComponentNodeList(this.id,$,z).length===0)b(`no component found matching phx-target of ${$}`);else Q(this,parseInt($));else{const J=Array.from(z.querySelectorAll($));if(J.length===0)b(`nothing found matching the phx-target selector "${$}"`);J.forEach((W)=>this.liveSocket.owner(W,(q)=>Q(q,W)))}}applyDiff($,Q,z){this.log($,()=>["",t0(Q)]);const{diff:J,reply:W,events:q,title:Y}=$5.extract(Q);if(z({diff:J,reply:W,events:q}),typeof Y==="string"||$=="mount")window.requestAnimationFrame(()=>j.putTitle(Y))}onJoin($){const{rendered:Q,container:z,liveview_version:J,pid:W}=$;if(z){const[q,Y]=z;this.el=j.replaceRootContainer(this.el,q,Y)}if(this.childJoins=0,this.joinPending=!0,this.flash=null,this.root===this)this.formsForRecovery=this.getFormsForRecovery();if(this.isMain()&&window.history.state===null)h.pushState("replace",{type:"patch",id:this.id,position:this.liveSocket.currentHistoryPosition});if(J!==this.liveSocket.version())console.error(`LiveView asset version mismatch. JavaScript version ${this.liveSocket.version()} vs. server ${J}. To avoid issues, please ensure that your assets use the same version as the server.`);if(W)this.el.setAttribute(c5,W);h.dropLocal(this.liveSocket.localStorage,window.location.pathname,J5),this.applyDiff("mount",Q,({diff:q,events:Y})=>{this.rendered=new $5(this.id,q);const[G,B]=this.renderContainer(null,"join");this.dropPendingRefs(),this.joinCount++,this.joinAttempts=0,this.maybeRecoverForms(G,()=>{this.onJoinComplete($,G,B,Y)})})}dropPendingRefs(){j.all(document,`[${d}="${this.refSrc()}"]`,($)=>{$.removeAttribute(O0),$.removeAttribute(d),$.removeAttribute(y)})}onJoinComplete({live_patch:$},Q,z,J){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch($,Q,z,J);if(j.findPhxChildrenInFragment(Q,this.id).filter((q)=>{const Y=q.id&&this.el.querySelector(`[id="${q.id}"]`),G=Y&&Y.getAttribute(M0);if(G)q.setAttribute(M0,G);if(Y)Y.setAttribute(G0,this.root.id);return this.joinChild(q)}).length===0)if(this.parent)this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch($,Q,z,J)]),this.parent.ackJoin(this);else this.onAllChildJoinsComplete(),this.applyJoinPatch($,Q,z,J);else this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch($,Q,z,J)])}attachTrueDocEl(){this.el=j.byId(this.id),this.el.setAttribute(G0,this.root.id)}execNewMounted($=document){let Q=this.binding(L1),z=this.binding(D1);this.all($,`[${Q}], [${z}]`,(J)=>{j.maintainPrivateHooks(J,J,Q,z),this.maybeAddNewHook(J)}),this.all($,`[${this.binding(b0)}], [data-phx-${b0}]`,(J)=>{this.maybeAddNewHook(J)}),this.all($,`[${this.binding(u1)}]`,(J)=>{this.maybeMounted(J)})}all($,Q,z){j.all($,Q,(J)=>{if(this.ownsElement(J))z(J)})}applyJoinPatch($,Q,z,J){if(this.joinCount>1){if(this.pendingJoinOps.length)this.pendingJoinOps.forEach((q)=>typeof q==="function"&&q()),this.pendingJoinOps=[]}this.attachTrueDocEl();const W=new n0(this,this.el,this.id,Q,z,null);if(W.markPrunableContentForRemoval(),this.performPatch(W,!1,!0),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(J),this.applyPendingUpdates(),$){const{kind:q,to:Y}=$;this.liveSocket.historyPatch(Y,q)}if(this.hideLoader(),this.joinCount>1)this.triggerReconnected();this.stopCallback()}triggerBeforeUpdateHook($,Q){this.liveSocket.triggerDOM("onBeforeElUpdated",[$,Q]);const z=this.getHook($),J=z&&j.isIgnored($,this.binding($1));if(z&&!$.isEqualNode(Q)&&!(J&&Q9($.dataset,Q.dataset)))return z.__beforeUpdate(),z}maybeMounted($){const Q=$.getAttribute(this.binding(u1)),z=Q&&j.private($,"mounted");if(Q&&!z)this.liveSocket.execJS($,Q),j.putPrivate($,"mounted",!0)}maybeAddNewHook($){const Q=this.addHook($);if(Q)Q.__mounted()}performPatch($,Q,z=!1){const J=[];let W=!1;const q=new Set;return this.liveSocket.triggerDOM("onPatchStart",[$.targetContainer]),$.after("added",(Y)=>{this.liveSocket.triggerDOM("onNodeAdded",[Y]);const G=this.binding(L1),B=this.binding(D1);if(j.maintainPrivateHooks(Y,Y,G,B),this.maybeAddNewHook(Y),Y.getAttribute)this.maybeMounted(Y)}),$.after("phxChildAdded",(Y)=>{if(j.isPhxSticky(Y))this.liveSocket.joinRootViews();else W=!0}),$.before("updated",(Y,G)=>{if(this.triggerBeforeUpdateHook(Y,G))q.add(Y.id);R.onBeforeElUpdated(Y,G)}),$.after("updated",(Y)=>{if(q.has(Y.id))this.getHook(Y).__updated()}),$.after("discarded",(Y)=>{if(Y.nodeType===Node.ELEMENT_NODE)J.push(Y)}),$.after("transitionsDiscarded",(Y)=>this.afterElementsRemoved(Y,Q)),$.perform(z),this.afterElementsRemoved(J,Q),this.liveSocket.triggerDOM("onPatchEnd",[$.targetContainer]),W}afterElementsRemoved($,Q){const z=[];if($.forEach((J)=>{const W=j.all(J,`[${H0}="${this.id}"][${Q0}]`),q=j.all(J,`[${this.binding(b0)}], [data-phx-hook]`);W.concat(J).forEach((Y)=>{const G=this.componentID(Y);if($0(G)&&z.indexOf(G)===-1&&Y.getAttribute(H0)===this.id)z.push(G)}),q.concat(J).forEach((Y)=>{const G=this.getHook(Y);G&&this.destroyHook(G)})}),Q)this.maybePushComponentsDestroyed(z)}joinNewChildren(){j.findPhxChildren(document,this.id).forEach(($)=>this.joinChild($))}maybeRecoverForms($,Q){const z=this.binding("change"),J=this.root.formsForRecovery,W=document.createElement("template");W.innerHTML=$;const q=W.content.firstElementChild;q.id=this.id,q.setAttribute(G0,this.root.id),q.setAttribute(l,this.getSession()),q.setAttribute(M0,this.getStatic()),q.setAttribute(V0,this.parent?this.parent.id:null);const Y=j.all(W.content,"form").filter((G)=>G.id&&J[G.id]).filter((G)=>!this.pendingForms.has(G.id)).filter((G)=>J[G.id].getAttribute(z)===G.getAttribute(z)).map((G)=>{return[J[G.id],G]});if(Y.length===0)return Q();Y.forEach(([G,B],K)=>{this.pendingForms.add(B.id),this.pushFormRecovery(G,B,W.content.firstElementChild,()=>{if(this.pendingForms.delete(B.id),K===Y.length-1)Q()})})}getChildById($){return this.root.children[this.id][$]}getDescendentByEl($){if($.id===this.id)return this;else return this.children[$.getAttribute(V0)]?.[$.id]}destroyDescendent($){for(let Q in this.root.children)for(let z in this.root.children[Q])if(z===$)return this.root.children[Q][z].destroy()}joinChild($){if(!this.getChildById($.id)){const z=new Z($,this.liveSocket,this);return this.root.children[this.id][z.id]=z,z.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin($){if(this.childJoins--,this.childJoins===0)if(this.parent)this.parent.ackJoin(this);else this.onAllChildJoinsComplete()}onAllChildJoinsComplete(){this.pendingForms.clear(),this.formsForRecovery={},this.joinCallback(()=>{this.pendingJoinOps.forEach(([$,Q])=>{if(!$.isDestroyed())Q()}),this.pendingJoinOps=[]})}update($,Q,z=!1){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain()){if(!z)this.pendingDiffs.push({diff:$,events:Q});return!1}this.rendered.mergeDiff($);let J=!1;if(this.rendered.isComponentOnlyDiff($))this.liveSocket.time("component patch complete",()=>{j.findExistingParentCIDs(this.id,this.rendered.componentCIDs($)).forEach((q)=>{if(this.componentPatch(this.rendered.getComponent($,q),q))J=!0})});else if(!i1($))this.liveSocket.time("full patch complete",()=>{const[W,q]=this.renderContainer($,"update"),Y=new n0(this,this.el,this.id,W,q,null);J=this.performPatch(Y,!0)});if(this.liveSocket.dispatchEvents(Q),J)this.joinNewChildren();return!0}renderContainer($,Q){return this.liveSocket.time(`toString diff (${Q})`,()=>{const z=this.el.tagName,J=$?this.rendered.componentCIDs($):null,{buffer:W,streams:q}=this.rendered.toString(J);return[`<${z}>${W}</${z}>`,q]})}componentPatch($,Q){if(i1($))return!1;const{buffer:z,streams:J}=this.rendered.componentToString(Q),W=new n0(this,this.el,this.id,z,J,Q);return this.performPatch(W,!0)}getHook($){return this.viewHooks[x0.elementID($)]}addHook($){const Q=x0.elementID($);if($.getAttribute&&!this.ownsElement($))return;if(Q&&!this.viewHooks[Q]){const z=j.getCustomElHook($)||b(`no hook found for custom element: ${$.id}`);return this.viewHooks[Q]=z,z.__attachView(this),z}else if(Q||!$.getAttribute)return;else{const z=$.getAttribute(`data-phx-${b0}`)||$.getAttribute(this.binding(b0));if(!z)return;const J=this.liveSocket.getHookDefinition(z);if(J){if(!$.id){b(`no DOM ID for hook "${z}". Hooks require a unique ID on each element.`,$);return}let W;try{if(typeof J==="function"&&J.prototype instanceof x0)W=new J(this,$);else if(typeof J==="object"&&J!==null)W=new x0(this,$,J);else{b(`Invalid hook definition for "${z}". Expected a class extending ViewHook or an object definition.`,$);return}}catch(q){const Y=q instanceof Error?q.message:String(q);b(`Failed to create hook "${z}": ${Y}`,$);return}return this.viewHooks[x0.elementID(W.el)]=W,W}else if(z!==null)b(`unknown hook found for "${z}"`,$)}}destroyHook($){const Q=x0.elementID($.el);$.__destroyed(),$.__cleanup__(),delete this.viewHooks[Q]}applyPendingUpdates(){this.pendingDiffs=this.pendingDiffs.filter(({diff:$,events:Q})=>!this.update($,Q,!0)),this.eachChild(($)=>$.applyPendingUpdates())}eachChild($){const Q=this.root.children[this.id]||{};for(let z in Q)$(this.getChildById(z))}onChannel($,Q){this.liveSocket.onChannel(this.channel,$,(z)=>{if(this.isJoinPending())if(this.joinCount>1)this.pendingJoinOps.push(()=>Q(z));else this.root.pendingJoinOps.push([this,()=>Q(z)]);else this.liveSocket.requestDOMUpdate(()=>Q(z))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",($)=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",$,({diff:Q,events:z})=>this.update(Q,z))})}),this.onChannel("redirect",({to:$,flash:Q})=>this.onRedirect({to:$,flash:Q})),this.onChannel("live_patch",($)=>this.onLivePatch($)),this.onChannel("live_redirect",($)=>this.onLiveRedirect($)),this.channel.onError(($)=>this.onError($)),this.channel.onClose(($)=>this.onClose($))}destroyAllChildren(){this.eachChild(($)=>$.destroy())}onLiveRedirect($){const{to:Q,kind:z,flash:J}=$,W=this.expandURL(Q),q=new CustomEvent("phx:server-navigate",{detail:{to:Q,kind:z,flash:J}});this.liveSocket.historyRedirect(q,W,z,J)}onLivePatch($){const{to:Q,kind:z}=$;this.href=this.expandURL(Q),this.liveSocket.historyPatch(Q,z)}expandURL($){return $.startsWith("/")?`${window.location.protocol}//${window.location.host}${$}`:$}onRedirect({to:$,flash:Q,reloadToken:z}){this.liveSocket.redirect($,Q,z)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}joinPush(){return this.joinPush=this.joinPush||this.channel.join(),this.joinPush}join($){if(this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain())this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"});this.joinCallback=(Q)=>{Q=Q||function(){},$?$(this.joinCount,Q):Q()},this.wrapPush(()=>this.channel.join(),{ok:(Q)=>this.liveSocket.requestDOMUpdate(()=>this.onJoin(Q)),error:(Q)=>this.onJoinError(Q),timeout:()=>this.onJoinError({reason:"timeout"})})}onJoinError($){if($.reason==="reload"){this.log("error",()=>[`failed mount with ${$.status}. Falling back to page reload`,$]),this.onRedirect({to:this.root.href,reloadToken:$.token});return}else if($.reason==="unauthorized"||$.reason==="stale"){this.log("error",()=>["unauthorized live_redirect. Falling back to page request",$]),this.onRedirect({to:this.root.href,flash:this.flash});return}if($.redirect||$.live_redirect)this.joinPending=!1,this.channel.leave();if($.redirect)return this.onRedirect($.redirect);if($.live_redirect)return this.onLiveRedirect($.live_redirect);if(this.log("error",()=>["unable to join",$]),this.isMain()){if(this.displayError([j0,L0,S0],{unstructuredError:$,errorKind:"server"}),this.liveSocket.isConnected())this.liveSocket.reloadWithJitter(this)}else{if(this.joinAttempts>=f1)this.root.displayError([j0,L0,S0],{unstructuredError:$,errorKind:"server"}),this.log("error",()=>[`giving up trying to mount after ${f1} tries`,$]),this.destroy();const Q=j.byId(this.el.id);if(Q)j.mergeAttrs(Q,this.el),this.displayError([j0,L0,S0],{unstructuredError:$,errorKind:"server"}),this.el=Q;else this.destroy()}}onClose($){if(this.isDestroyed())return;if(this.isMain()&&this.liveSocket.hasPendingLink()&&$!=="leave")return this.liveSocket.reloadWithJitter(this);if(this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),this.liveSocket.isUnloaded())this.showLoader(n5)}onError($){if(this.onClose($),this.liveSocket.isConnected())this.log("error",()=>["view crashed",$]);if(!this.liveSocket.isUnloaded())if(this.liveSocket.isConnected())this.displayError([j0,L0,S0],{unstructuredError:$,errorKind:"server"});else this.displayError([j0,L0,v1],{unstructuredError:$,errorKind:"client"})}displayError($,Q={}){if(this.isMain())j.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error",...Q}});this.showLoader(),this.setContainerClasses(...$),this.delayedDisconnected()}delayedDisconnected(){this.disconnectedTimer=setTimeout(()=>{this.execAll(this.binding("disconnected"))},this.liveSocket.disconnectedTimeout)}wrapPush($,Q){const z=this.liveSocket.getLatencySim(),J=z?(W)=>setTimeout(()=>!this.isDestroyed()&&W(),z):(W)=>!this.isDestroyed()&&W();J(()=>{$().receive("ok",(W)=>J(()=>Q.ok&&Q.ok(W))).receive("error",(W)=>J(()=>Q.error&&Q.error(W))).receive("timeout",()=>J(()=>Q.timeout&&Q.timeout()))})}pushWithReply($,Q,z){if(!this.isConnected())return Promise.reject(new Error("no connection"));const[J,[W],q]=$?$({payload:z}):[null,[],{}],Y=this.joinCount;let G=function(){};if(q.page_loading)G=this.liveSocket.withPageLoading({kind:"element",target:W});if(typeof z.cid!=="number")delete z.cid;return new Promise((B,K)=>{this.wrapPush(()=>this.channel.push(Q,z,o5),{ok:(M)=>{if(J!==null)this.lastAckRef=J;const X=(F)=>{if(M.redirect)this.onRedirect(M.redirect);if(M.live_patch)this.onLivePatch(M.live_patch);if(M.live_redirect)this.onLiveRedirect(M.live_redirect);G(),B({resp:M,reply:F,ref:J})};if(M.diff)this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",M.diff,({diff:F,reply:V,events:L})=>{if(J!==null)this.undoRefs(J,z.event);this.update(F,L),X(V)})});else{if(J!==null)this.undoRefs(J,z.event);X(null)}},error:(M)=>K(new Error(`failed with reason: ${M}`)),timeout:()=>{if(K(new Error("timeout")),this.joinCount===Y)this.liveSocket.reloadWithJitter(this,()=>{this.log("timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}})})}undoRefs($,Q,z){if(!this.isConnected())return;const J=`[${d}="${this.refSrc()}"]`;if(z)z=new Set(z),j.all(document,J,(W)=>{if(z&&!z.has(W))return;j.all(W,J,(q)=>this.undoElRef(q,$,Q)),this.undoElRef(W,$,Q)});else j.all(document,J,(W)=>this.undoElRef(W,$,Q))}undoElRef($,Q,z){new A1($).maybeUndo(Q,z,(W)=>{const q=new n0(this,$,this.id,W,[],null,{undoRef:Q}),Y=this.performPatch(q,!0);if(j.all($,`[${d}="${this.refSrc()}"]`,(G)=>this.undoElRef(G,Q,z)),Y)this.joinNewChildren()})}refSrc(){return this.el.id}putRef($,Q,z,J={}){const W=this.ref++,q=this.binding(_1);if(J.loading){const Y=j.all(document,J.loading).map((G)=>{return{el:G,lock:!0,loading:!0}});$=$.concat(Y)}for(let{el:Y,lock:G,loading:B}of $){if(!G&&!B)throw new Error("putRef requires lock or loading");if(Y.setAttribute(d,this.refSrc()),B)Y.setAttribute(O0,W);if(G)Y.setAttribute(y,W);if(!B||J.submitter&&!(Y===J.submitter||Y===J.form))continue;const K=new Promise((V)=>{Y.addEventListener(`phx:undo-lock:${W}`,()=>V(F),{once:!0})}),M=new Promise((V)=>{Y.addEventListener(`phx:undo-loading:${W}`,()=>V(F),{once:!0})});Y.classList.add(`phx-${z}-loading`);const X=Y.getAttribute(q);if(X!==null){if(!Y.getAttribute(Z1))Y.setAttribute(Z1,Y.innerText);if(X!=="")Y.innerText=X;Y.setAttribute(A0,Y.getAttribute(A0)||Y.disabled),Y.setAttribute("disabled","")}const F={event:Q,eventType:z,ref:W,isLoading:B,isLocked:G,lockElements:$.filter(({lock:V})=>V).map(({el:V})=>V),loadingElements:$.filter(({loading:V})=>V).map(({el:V})=>V),unlock:(V)=>{V=Array.isArray(V)?V:[V],this.undoRefs(W,Q,V)},lockComplete:K,loadingComplete:M,lock:(V)=>{return new Promise((L)=>{if(this.isAcked(W))return L(F);V.setAttribute(y,W),V.setAttribute(d,this.refSrc()),V.addEventListener(`phx:lock-stop:${W}`,()=>L(F),{once:!0})})}};if(J.payload)F.payload=J.payload;if(J.target)F.target=J.target;if(J.originalEvent)F.originalEvent=J.originalEvent;if(Y.dispatchEvent(new CustomEvent("phx:push",{detail:F,bubbles:!0,cancelable:!1})),Q)Y.dispatchEvent(new CustomEvent(`phx:push:${Q}`,{detail:F,bubbles:!0,cancelable:!1}))}return[W,$.map(({el:Y})=>Y),J]}isAcked($){return this.lastAckRef!==null&&this.lastAckRef>=$}componentID($){const Q=$.getAttribute&&$.getAttribute(Q0);return Q?parseInt(Q):null}targetComponentID($,Q,z={}){if($0(Q))return Q;const J=z.target||$.getAttribute(this.binding("target"));if($0(J))return parseInt(J);else if(Q&&(J!==null||z.target))return this.closestComponentID(Q);else return null}closestComponentID($){if($0($))return $;else if($)return U0($.closest(`[${Q0}]`),(Q)=>this.ownsElement(Q)&&this.componentID(Q));else return null}pushHookEvent($,Q,z,J){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",z,J]),Promise.reject(new Error("unable to push hook event. LiveView not connected"));const W=()=>this.putRef([{el:$,loading:!0,lock:!0}],z,"hook",{payload:J,target:Q});return this.pushWithReply(W,"event",{type:"hook",event:z,value:J,cid:this.closestComponentID(Q)}).then(({resp:q,reply:Y,ref:G})=>({reply:Y,ref:G}))}extractMeta($,Q,z){const J=this.binding("value-");for(let W=0;W<$.attributes.length;W++){if(!Q)Q={};const q=$.attributes[W].name;if(q.startsWith(J))Q[q.replace(J,"")]=$.getAttribute(q)}if($.value!==void 0&&!($ instanceof HTMLFormElement)){if(!Q)Q={};if(Q.value=$.value,$.tagName==="INPUT"&&B5.indexOf($.type)>=0&&!$.checked)delete Q.value}if(z){if(!Q)Q={};for(let W in z)Q[W]=z[W]}return Q}pushEvent($,Q,z,J,W,q={},Y){this.pushWithReply((G)=>this.putRef([{el:Q,loading:!0,lock:!0}],J,$,{...q,payload:G?.payload}),"event",{type:$,event:J,value:this.extractMeta(Q,W,q.value),cid:this.targetComponentID(Q,z,q)}).then(({reply:G})=>Y&&Y(G)).catch((G)=>b("Failed to push event",G))}pushFileProgress($,Q,z,J=function(){}){this.liveSocket.withinOwners($.form,(W,q)=>{W.pushWithReply(null,"progress",{event:$.getAttribute(W.binding(d5)),ref:$.getAttribute(z0),entry_ref:Q,progress:z,cid:W.targetComponentID($.form,q)}).then(()=>J()).catch((Y)=>b("Failed to push file progress",Y))})}pushInput($,Q,z,J,W,q){if(!$.form)throw new Error("form events require the input to be inside a form");let Y;const G=$0(z)?z:this.targetComponentID($.form,Q,W),B=(V)=>{return this.putRef([{el:$,loading:!0,lock:!0},{el:$.form,loading:!0,lock:!0}],J,"change",{...W,payload:V?.payload})};let K;const M=this.extractMeta($.form,{},W.value),X={};if($ instanceof HTMLButtonElement)X.submitter=$;if($.getAttribute(this.binding("change")))K=a0($.form,X,[$.name]);else K=a0($.form,X);if(j.isUploadInput($)&&$.files&&$.files.length>0)g.trackFiles($,Array.from($.files));Y=g.serializeUploads($);const F={type:"form",event:J,value:K,meta:{_target:W._target||"undefined",...M},uploads:Y,cid:G};this.pushWithReply(B,"event",F).then(({resp:V})=>{if(j.isUploadInput($)&&j.isAutoUpload($))A1.onUnlock($,()=>{if(g.filesAwaitingPreflight($).length>0){const[L,x]=B();this.undoRefs(L,J,[$.form]),this.uploadFiles($.form,J,Q,L,G,(T)=>{q&&q(V),this.triggerAwaitingSubmit($.form,J),this.undoRefs(L,J)})}});else q&&q(V)}).catch((V)=>b("Failed to push input event",V))}triggerAwaitingSubmit($,Q){const z=this.getScheduledSubmit($);if(z){const[J,W,q,Y]=z;this.cancelSubmit($,Q),Y()}}getScheduledSubmit($){return this.formSubmits.find(([Q,z,J,W])=>Q.isSameNode($))}scheduleSubmit($,Q,z,J){if(this.getScheduledSubmit($))return!0;this.formSubmits.push([$,Q,z,J])}cancelSubmit($,Q){this.formSubmits=this.formSubmits.filter(([z,J,W,q])=>{if(z.isSameNode($))return this.undoRefs(J,Q),!1;else return!0})}disableForm($,Q,z={}){const J=(V)=>{return!(v0(V,`${this.binding($1)}=ignore`,V.form)||v0(V,"data-phx-update=ignore",V.form))},W=(V)=>{return V.hasAttribute(this.binding(_1))},q=(V)=>V.tagName=="BUTTON",Y=(V)=>["INPUT","TEXTAREA","SELECT"].includes(V.tagName),G=Array.from($.elements),B=G.filter(W),K=G.filter(q).filter(J),M=G.filter(Y).filter(J);K.forEach((V)=>{V.setAttribute(A0,V.disabled),V.disabled=!0}),M.forEach((V)=>{if(V.setAttribute(x1,V.readOnly),V.readOnly=!0,V.files)V.setAttribute(A0,V.disabled),V.disabled=!0});const X=B.concat(K).concat(M).map((V)=>{return{el:V,loading:!0,lock:!0}}),F=[{el:$,loading:!0,lock:!1}].concat(X).reverse();return this.putRef(F,Q,"submit",z)}pushFormSubmit($,Q,z,J,W,q){const Y=(B)=>this.disableForm($,z,{...W,form:$,payload:B?.payload,submitter:J});j.putPrivate($,"submitter",J);const G=this.targetComponentID($,Q);if(g.hasUploadsInProgress($)){const[B,K]=Y(),M=()=>this.pushFormSubmit($,Q,z,J,W,q);return this.scheduleSubmit($,B,W,M)}else if(g.inputsAwaitingPreflight($).length>0){const[B,K]=Y(),M=()=>[B,K,W];this.uploadFiles($,z,Q,B,G,(X)=>{if(g.inputsAwaitingPreflight($).length>0)return this.undoRefs(B,z);const F=this.extractMeta($,{},W.value),V=a0($,{submitter:J});this.pushWithReply(M,"event",{type:"form",event:z,value:V,meta:F,cid:G}).then(({resp:L})=>q(L)).catch((L)=>b("Failed to push form submit",L))})}else if(!($.hasAttribute(d)&&$.classList.contains("phx-submit-loading"))){const B=this.extractMeta($,{},W.value),K=a0($,{submitter:J});this.pushWithReply(Y,"event",{type:"form",event:z,value:K,meta:B,cid:G}).then(({resp:M})=>q(M)).catch((M)=>b("Failed to push form submit",M))}}uploadFiles($,Q,z,J,W,q){const Y=this.joinCount,G=g.activeFileInputs($);let B=G.length;G.forEach((K)=>{const M=new g(K,this,()=>{if(B--,B===0)q()}),X=M.entries().map((V)=>V.toPreflightPayload());if(X.length===0){B--;return}const F={ref:K.getAttribute(z0),entries:X,cid:this.targetComponentID(K.form,z)};this.log("upload",()=>["sending preflight request",F]),this.pushWithReply(null,"allow_upload",F).then(({resp:V})=>{if(this.log("upload",()=>["got preflight response",V]),M.entries().forEach((L)=>{if(V.entries&&!V.entries[L.ref])this.handleFailedEntryPreflight(L.ref,"failed preflight",M)}),V.error||Object.keys(V.entries).length===0)this.undoRefs(J,Q),(V.error||[]).map(([x,T])=>{this.handleFailedEntryPreflight(x,T,M)});else{const L=(x)=>{this.channel.onError(()=>{if(this.joinCount===Y)x()})};M.initAdapterUpload(V,L,this.liveSocket)}}).catch((V)=>b("Failed to push upload",V))})}handleFailedEntryPreflight($,Q,z){if(z.isAutoUpload()){const J=z.entries().find((W)=>W.ref===$.toString());if(J)J.cancel()}else z.entries().map((J)=>J.cancel());this.log("upload",()=>[`error for entry ${$}`,Q])}dispatchUploads($,Q,z){const J=this.targetCtxElement($)||this.el,W=j.findUploadInputs(J).filter((q)=>q.name===Q);if(W.length===0)b(`no live file inputs found matching the name "${Q}"`);else if(W.length>1)b(`duplicate live file inputs found matching the name "${Q}"`);else j.dispatchEvent(W[0],q5,{detail:{files:z}})}targetCtxElement($){if($0($)){const[Q]=j.findComponentNodeList(this.id,$);return Q}else if($)return $;else return null}pushFormRecovery($,Q,z,J){const W=this.binding("change"),q=Q.getAttribute(this.binding("target"))||Q,Y=Q.getAttribute(this.binding(h1))||Q.getAttribute(this.binding("change")),G=Array.from($.elements).filter((M)=>j.isFormInput(M)&&M.name&&!M.hasAttribute(W));if(G.length===0){J();return}G.forEach((M)=>M.hasAttribute(z0)&&g.clearFiles(M));const B=G.find((M)=>M.type!=="hidden")||G[0];let K=0;this.withinTargets(q,(M,X)=>{const F=this.targetComponentID(Q,X);K++;let V=new CustomEvent("phx:form-recovery",{detail:{sourceElement:$}});R.exec(V,"change",Y,this,B,["push",{_target:B.name,targetView:M,targetCtx:X,newCid:F,callback:()=>{if(K--,K===0)J()}}])},z)}pushLinkPatch($,Q,z,J){const W=this.liveSocket.setPendingLink(Q),q=$.isTrusted&&$.type!=="popstate",Y=z?()=>this.putRef([{el:z,loading:q,lock:!0}],null,"click"):null,G=()=>this.liveSocket.redirect(window.location.href),B=Q.startsWith("/")?`${location.protocol}//${location.host}${Q}`:Q;this.pushWithReply(Y,"live_patch",{url:B}).then(({resp:K})=>{this.liveSocket.requestDOMUpdate(()=>{if(K.link_redirect)this.liveSocket.replaceMain(Q,null,J,W);else{if(this.liveSocket.commitPendingLink(W))this.href=Q;this.applyPendingUpdates(),J&&J(W)}})},({error:K,timeout:M})=>G())}getFormsForRecovery(){if(this.joinCount===0)return{};const $=this.binding("change");return j.all(this.el,`form[${$}]`).filter((Q)=>Q.id).filter((Q)=>Q.elements.length>0).filter((Q)=>Q.getAttribute(this.binding(h1))!=="ignore").map((Q)=>{const z=Q.cloneNode(!0);H1(z,Q,{onBeforeElUpdated:(W,q)=>{return j.copyPrivates(W,q),!0}});const J=document.querySelectorAll(`[form="${Q.id}"]`);return Array.from(J).forEach((W)=>{if(Q.contains(W))return;const q=W.cloneNode(!0);H1(q,W),j.copyPrivates(q,W),z.appendChild(q)}),z}).reduce((Q,z)=>{return Q[z.id]=z,Q},{})}maybePushComponentsDestroyed($){let Q=$.filter((J)=>{return j.findComponentNodeList(this.id,J).length===0});const z=(J)=>{if(!this.isDestroyed())b("Failed to push components destroyed",J)};if(Q.length>0)Q.forEach((J)=>this.rendered.resetRender(J)),this.pushWithReply(null,"cids_will_destroy",{cids:Q}).then(()=>{this.liveSocket.requestDOMUpdate(()=>{let J=Q.filter((W)=>{return j.findComponentNodeList(this.id,W).length===0});if(J.length>0)this.pushWithReply(null,"cids_destroyed",{cids:J}).then(({resp:W})=>{this.rendered.pruneCIDs(W.cids)}).catch(z)})}).catch(z)}ownsElement($){let Q=j.closestViewEl($);return $.getAttribute(V0)===this.id||Q&&Q.id===this.id||!Q&&this.isDead}submitForm($,Q,z,J,W={}){j.putPrivate($,_0,!0),Array.from($.elements).forEach((Y)=>j.putPrivate(Y,_0,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit($,Q,z,J,W,()=>{this.liveSocket.restorePreviouslyActiveFocus()})}binding($){return this.liveSocket.binding($)}pushPortalElementId($){this.portalElementIds.add($)}dropPortalElementId($){this.portalElementIds.delete($)}destroyPortalElements(){this.portalElementIds.forEach(($)=>{const Q=document.getElementById($);if(Q)Q.remove()})}};var C9=class{constructor(Z,$,Q={}){if(this.unloaded=!1,!$||$.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new $(Z,Q),this.bindingPrefix=Q.bindingPrefix||r5,this.opts=Q,this.params=T0(Q.params||{}),this.viewLogger=Q.viewLogger,this.metadataCallbacks=Q.metadata||{},this.defaults=Object.assign(t0(l5),Q.defaults||{}),this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=t0(window.location),this.hooks=Q.hooks||{},this.uploaders=Q.uploaders||{},this.loaderTimeout=Q.loaderTimeout||i5,this.disconnectedTimeout=Q.disconnectedTimeout||a5,this.reloadWithJitterTimer=null,this.maxReloads=Q.maxReloads||T5,this.reloadJitterMin=Q.reloadJitterMin||g5,this.reloadJitterMax=Q.reloadJitterMax||k5,this.failsafeJitter=Q.failsafeJitter||v5,this.localStorage=Q.localStorage||window.localStorage,this.sessionStorage=Q.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.boundEventNames=new Set,this.blockPhxChangeWhileComposing=Q.blockPhxChangeWhileComposing||!1,this.serverCloseRef=null,this.domCallbacks=Object.assign({jsQuerySelectorAll:null,onPatchStart:T0(),onPatchEnd:T0(),onNodeAdded:T0(),onBeforeElUpdated:T0()},Q.dom||{}),this.transitions=new y9,this.currentHistoryPosition=parseInt(this.sessionStorage.getItem(s0))||0,window.addEventListener("pagehide",(z)=>{this.unloaded=!0}),this.socket.onOpen(()=>{if(this.isUnloaded())window.location.reload()})}version(){return"1.1.11"}isProfileEnabled(){return this.sessionStorage.getItem(K1)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(c0)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(c0)==="false"}enableDebug(){this.sessionStorage.setItem(c0,"true")}enableProfiling(){this.sessionStorage.setItem(K1,"true")}disableDebug(){this.sessionStorage.setItem(c0,"false")}disableProfiling(){this.sessionStorage.removeItem(K1)}enableLatencySim(Z){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(M1,Z)}disableLatencySim(){this.sessionStorage.removeItem(M1)}getLatencySim(){const Z=this.sessionStorage.getItem(M1);return Z?parseInt(Z):null}getSocket(){return this.socket}connect(){if(window.location.hostname==="localhost"&&!this.isDebugDisabled())this.enableDebug();const Z=()=>{if(this.resetReloadStatus(),this.joinRootViews())this.bindTopLevelEvents(),this.socket.connect();else if(this.main)this.socket.connect();else this.bindTopLevelEvents({dead:!0});this.joinDeadView()};if(["complete","loaded","interactive"].indexOf(document.readyState)>=0)Z();else document.addEventListener("DOMContentLoaded",()=>Z())}disconnect(Z){if(clearTimeout(this.reloadWithJitterTimer),this.serverCloseRef)this.socket.off(this.serverCloseRef),this.serverCloseRef=null;this.socket.disconnect(Z)}replaceTransport(Z){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(Z),this.connect()}execJS(Z,$,Q=null){const z=new CustomEvent("phx:exec",{detail:{sourceElement:Z}});this.owner(Z,(J)=>R.exec(z,Q,$,J,Z))}js(){return U5(this,"js")}unload(){if(this.unloaded)return;if(this.main&&this.isConnected())this.log(this.main,"socket",()=>["disconnect for page nav"]);this.unloaded=!0,this.destroyAllViews(),this.disconnect()}triggerDOM(Z,$){this.domCallbacks[Z](...$)}time(Z,$){if(!this.isProfileEnabled()||!console.time)return $();console.time(Z);const Q=$();return console.timeEnd(Z),Q}log(Z,$,Q){if(this.viewLogger){const[z,J]=Q();this.viewLogger(Z,$,z,J)}else if(this.isDebugEnabled()){const[z,J]=Q();$9(Z,$,z,J)}}requestDOMUpdate(Z){this.transitions.after(Z)}asyncTransition(Z){this.transitions.addAsyncTransition(Z)}transition(Z,$,Q=function(){}){this.transitions.addTransition(Z,$,Q)}onChannel(Z,$,Q){Z.on($,(z)=>{const J=this.getLatencySim();if(!J)Q(z);else setTimeout(()=>Q(z),J)})}reloadWithJitter(Z,$){clearTimeout(this.reloadWithJitterTimer),this.disconnect();const Q=this.reloadJitterMin,z=this.reloadJitterMax;let J=Math.floor(Math.random()*(z-Q+1))+Q;const W=h.updateLocal(this.localStorage,window.location.pathname,J5,0,(q)=>q+1);if(W>=this.maxReloads)J=this.failsafeJitter;this.reloadWithJitterTimer=setTimeout(()=>{if(Z.isDestroyed()||Z.isConnected())return;if(Z.destroy(),$?$():this.log(Z,"join",()=>[`encountered ${W} consecutive reloads`]),W>=this.maxReloads)this.log(Z,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]);if(this.hasPendingLink())window.location=this.pendingLink;else window.location.reload()},J)}getHookDefinition(Z){if(!Z)return;return this.maybeInternalHook(Z)||this.hooks[Z]||this.maybeRuntimeHook(Z)}maybeInternalHook(Z){return Z&&Z.startsWith("Phoenix.")&&B9[Z.split(".")[1]]}maybeRuntimeHook(Z){const $=document.querySelector(`script[${l0}="${CSS.escape(Z)}"]`);if(!$)return;let Q=window[`phx_hook_${Z}`];if(!Q||typeof Q!=="function"){b("a runtime hook must be a function",$);return}const z=Q();if(z&&(typeof z==="object"||typeof z==="function"))return z;b("runtime hook must return an object with hook callbacks or an instance of ViewHook",$)}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(Z){return`${this.getBindingPrefix()}${Z}`}channel(Z,$){return this.socket.channel(Z,$)}joinDeadView(){const Z=document.body;if(Z&&!this.isPhxView(Z)&&!this.isPhxView(document.firstElementChild)){const $=this.newRootView(Z);if($.setHref(this.getHref()),$.joinDead(),!this.main)this.main=$;window.requestAnimationFrame(()=>{$.execNewMounted(),this.maybeScroll(history.state?.scroll)})}}joinRootViews(){let Z=!1;return j.all(document,`${h0}:not([${V0}])`,($)=>{if(!this.getRootById($.id)){const Q=this.newRootView($);if(!j.isPhxSticky($))Q.setHref(this.getHref());if(Q.join(),$.hasAttribute(w1))this.main=Q}Z=!0}),Z}redirect(Z,$,Q){if(Q)h.setCookie(E1,Q,60);this.unload(),h.redirect(Z,$)}replaceMain(Z,$,Q=null,z=this.setPendingLink(Z)){const J=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;const W=j.findPhxSticky(document)||[],q=j.all(this.outgoingMainEl,`[${this.binding("remove")}]`).filter((G)=>!j.isChildOfAny(G,W)),Y=j.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(Y,$,J),this.main.setRedirect(Z),this.transitionRemoves(q),this.main.join((G,B)=>{if(G===1&&this.commitPendingLink(z))this.requestDOMUpdate(()=>{q.forEach((K)=>K.remove()),W.forEach((K)=>Y.appendChild(K)),this.outgoingMainEl.replaceWith(Y),this.outgoingMainEl=null,Q&&Q(z),B()})})}transitionRemoves(Z,$){const Q=this.binding("remove"),z=(J)=>{J.preventDefault(),J.stopImmediatePropagation()};Z.forEach((J)=>{for(let W of this.boundEventNames)J.addEventListener(W,z,!0);this.execJS(J,J.getAttribute(Q),"remove")}),this.requestDOMUpdate(()=>{Z.forEach((J)=>{for(let W of this.boundEventNames)J.removeEventListener(W,z,!0)}),$&&$()})}isPhxView(Z){return Z.getAttribute&&Z.getAttribute(l)!==null}newRootView(Z,$,Q){const z=new N9(Z,this,null,$,Q);return this.roots[z.id]=z,z}owner(Z,$){let Q;const z=j.closestViewEl(Z);if(z)Q=this.getViewByEl(z);else Q=this.main;return Q&&$?$(Q):Q}withinOwners(Z,$){this.owner(Z,(Q)=>$(Q,Z))}getViewByEl(Z){const $=Z.getAttribute(G0);return U0(this.getRootById($),(Q)=>Q.getDescendentByEl(Z))}getRootById(Z){return this.roots[Z]}destroyAllViews(){for(let Z in this.roots)this.roots[Z].destroy(),delete this.roots[Z];this.main=null}destroyViewByEl(Z){const $=this.getRootById(Z.getAttribute(G0));if($&&$.id===Z.id)$.destroy(),delete this.roots[$.id];else if($)$.destroyDescendent(Z.id)}getActiveElement(){return document.activeElement}dropActiveElement(Z){if(this.prevActive&&Z.ownsElement(this.prevActive))this.prevActive=null}restorePreviouslyActiveFocus(){if(this.prevActive&&this.prevActive!==document.body&&this.prevActive instanceof HTMLElement)this.prevActive.focus()}blurActiveElement(){if(this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive instanceof HTMLElement)this.prevActive.blur()}bindTopLevelEvents({dead:Z}={}){if(this.boundTopLevelEvents)return;if(this.boundTopLevelEvents=!0,this.serverCloseRef=this.socket.onClose(($)=>{if($&&$.code===1000&&this.main)return this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",($)=>{if($.persisted)this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload()},!0),!Z)this.bindNav();if(this.bindClicks(),!Z)this.bindForms();this.bind({keyup:"keyup",keydown:"keydown"},($,Q,z,J,W,q)=>{const Y=J.getAttribute(this.binding(s5)),G=$.key&&$.key.toLowerCase();if(Y&&Y.toLowerCase()!==G)return;const B={key:$.key,...this.eventMeta(Q,$,J)};R.exec($,Q,W,z,J,["push",{data:B}])}),this.bind({blur:"focusout",focus:"focusin"},($,Q,z,J,W,q)=>{if(!q){const Y={key:$.key,...this.eventMeta(Q,$,J)};R.exec($,Q,W,z,J,["push",{data:Y}])}}),this.bind({blur:"blur",focus:"focus"},($,Q,z,J,W,q)=>{if(q==="window"){const Y=this.eventMeta(Q,$,J);R.exec($,Q,W,z,J,["push",{data:Y}])}}),this.on("dragover",($)=>$.preventDefault()),this.on("drop",($)=>{$.preventDefault();const Q=U0(v0($.target,this.binding(T1)),(W)=>{return W.getAttribute(this.binding(T1))}),z=Q&&document.getElementById(Q),J=Array.from($.dataTransfer.files||[]);if(!z||!(z instanceof HTMLInputElement)||z.disabled||J.length===0||!(z.files instanceof FileList))return;g.trackFiles(z,J,$.dataTransfer),z.dispatchEvent(new Event("input",{bubbles:!0}))}),this.on(q5,($)=>{const Q=$.target;if(!j.isUploadInput(Q))return;const z=Array.from($.detail.files||[]).filter((J)=>J instanceof File||J instanceof Blob);g.trackFiles(Q,z),Q.dispatchEvent(new Event("input",{bubbles:!0}))})}eventMeta(Z,$,Q){const z=this.metadataCallbacks[Z];return z?z($,Q):{}}setPendingLink(Z){return this.linkRef++,this.pendingLink=Z,this.resetReloadStatus(),this.linkRef}resetReloadStatus(){h.deleteCookie(E1)}commitPendingLink(Z){if(this.linkRef!==Z)return!1;else return this.href=this.pendingLink,this.pendingLink=null,!0}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(Z,$){for(let Q in Z){const z=Z[Q];this.on(z,(J)=>{const W=this.binding(Q),q=this.binding(`window-${Q}`),Y=J.target.getAttribute&&J.target.getAttribute(W);if(Y)this.debounce(J.target,J,z,()=>{this.withinOwners(J.target,(G)=>{$(J,Q,G,J.target,Y,null)})});else j.all(document,`[${q}]`,(G)=>{const B=G.getAttribute(q);this.debounce(G,J,z,()=>{this.withinOwners(G,(K)=>{$(J,Q,K,G,B,"window")})})})})}}bindClicks(){this.on("mousedown",(Z)=>this.clickStartedAtTarget=Z.target),this.bindClick("click","click")}bindClick(Z,$){const Q=this.binding($);window.addEventListener(Z,(z)=>{let J=null;if(z.detail===0)this.clickStartedAtTarget=z.target;const W=this.clickStartedAtTarget||z.target;J=v0(z.target,Q),this.dispatchClickAway(z,W),this.clickStartedAtTarget=null;const q=J&&J.getAttribute(Q);if(!q){if(j.isNewPageClick(z,window.location))this.unload();return}if(J.getAttribute("href")==="#")z.preventDefault();if(J.hasAttribute(d))return;this.debounce(J,z,"click",()=>{this.withinOwners(J,(Y)=>{R.exec(z,"click",q,Y,J,["push",{data:this.eventMeta("click",z,J)}])})})},!1)}dispatchClickAway(Z,$){const Q=this.binding("click-away");j.all(document,`[${Q}]`,(z)=>{if(!(z.isSameNode($)||z.contains($)))this.withinOwners(z,(J)=>{const W=z.getAttribute(Q);if(R.isVisible(z)&&R.isInViewport(z))R.exec(Z,"click",W,J,z,["push",{data:this.eventMeta("click",Z,Z.target)}])})})}bindNav(){if(!h.canPushState())return;if(history.scrollRestoration)history.scrollRestoration="manual";let Z=null;window.addEventListener("scroll",($)=>{clearTimeout(Z),Z=setTimeout(()=>{h.updateCurrentState((Q)=>Object.assign(Q,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",($)=>{if(!this.registerNewLocation(window.location))return;const{type:Q,backType:z,id:J,scroll:W,position:q}=$.state||{},Y=window.location.href,G=q>this.currentHistoryPosition,B=G?Q:z||Q;this.currentHistoryPosition=q||0,this.sessionStorage.setItem(s0,this.currentHistoryPosition.toString()),j.dispatchEvent(window,"phx:navigate",{detail:{href:Y,patch:B==="patch",pop:!0,direction:G?"forward":"backward"}}),this.requestDOMUpdate(()=>{const K=()=>{this.maybeScroll(W)};if(this.main.isConnected()&&B==="patch"&&J===this.main.id)this.main.pushLinkPatch($,Y,null,K);else this.replaceMain(Y,null,K)})},!1),window.addEventListener("click",($)=>{const Q=v0($.target,B1),z=Q&&Q.getAttribute(B1);if(!z||!this.isConnected()||!this.main||j.wantsNewTab($))return;const J=Q.href instanceof SVGAnimatedString?Q.href.baseVal:Q.href,W=Q.getAttribute(h5);if($.preventDefault(),$.stopImmediatePropagation(),this.pendingLink===J)return;this.requestDOMUpdate(()=>{if(z==="patch")this.pushHistoryPatch($,J,W,Q);else if(z==="redirect")this.historyRedirect($,J,W,null,Q);else throw new Error(`expected ${B1} to be "patch" or "redirect", got: ${z}`);const q=Q.getAttribute(this.binding("click"));if(q)this.requestDOMUpdate(()=>this.execJS(Q,q,"click"))})},!1)}maybeScroll(Z){if(typeof Z==="number")requestAnimationFrame(()=>{window.scrollTo(0,Z)})}dispatchEvent(Z,$={}){j.dispatchEvent(window,`phx:${Z}`,{detail:$})}dispatchEvents(Z){Z.forEach(([$,Q])=>this.dispatchEvent($,Q))}withPageLoading(Z,$){j.dispatchEvent(window,"phx:page-loading-start",{detail:Z});const Q=()=>j.dispatchEvent(window,"phx:page-loading-stop",{detail:Z});return $?$(Q):Q}pushHistoryPatch(Z,$,Q,z){if(!this.isConnected()||!this.main.isMain())return h.redirect($);this.withPageLoading({to:$,kind:"patch"},(J)=>{this.main.pushLinkPatch(Z,$,z,(W)=>{this.historyPatch($,Q,W),J()})})}historyPatch(Z,$,Q=this.setPendingLink(Z)){if(!this.commitPendingLink(Q))return;this.currentHistoryPosition++,this.sessionStorage.setItem(s0,this.currentHistoryPosition.toString()),h.updateCurrentState((z)=>({...z,backType:"patch"})),h.pushState($,{type:"patch",id:this.main.id,position:this.currentHistoryPosition},Z),j.dispatchEvent(window,"phx:navigate",{detail:{patch:!0,href:Z,pop:!1,direction:"forward"}}),this.registerNewLocation(window.location)}historyRedirect(Z,$,Q,z,J){const W=J&&Z.isTrusted&&Z.type!=="popstate";if(W)J.classList.add("phx-click-loading");if(!this.isConnected()||!this.main.isMain())return h.redirect($,z);if(/^\/$|^\/[^\/]+.*$/.test($)){const{protocol:Y,host:G}=window.location;$=`${Y}//${G}${$}`}const q=window.scrollY;this.withPageLoading({to:$,kind:"redirect"},(Y)=>{this.replaceMain($,z,(G)=>{if(G===this.linkRef)this.currentHistoryPosition++,this.sessionStorage.setItem(s0,this.currentHistoryPosition.toString()),h.updateCurrentState((B)=>({...B,backType:"redirect"})),h.pushState(Q,{type:"redirect",id:this.main.id,scroll:q,position:this.currentHistoryPosition},$),j.dispatchEvent(window,"phx:navigate",{detail:{href:$,patch:!1,pop:!1,direction:"forward"}}),this.registerNewLocation(window.location);if(W)J.classList.remove("phx-click-loading");Y()})})}registerNewLocation(Z){const{pathname:$,search:Q}=this.currentLocation;if($+Q===Z.pathname+Z.search)return!1;else return this.currentLocation=t0(Z),!0}bindForms(){let Z=0,$=!1;this.on("submit",(Q)=>{const z=Q.target.getAttribute(this.binding("submit")),J=Q.target.getAttribute(this.binding("change"));if(!$&&J&&!z)$=!0,Q.preventDefault(),this.withinOwners(Q.target,(W)=>{W.disableForm(Q.target),window.requestAnimationFrame(()=>{if(j.isUnloadableFormSubmit(Q))this.unload();Q.target.submit()})})}),this.on("submit",(Q)=>{const z=Q.target.getAttribute(this.binding("submit"));if(!z){if(j.isUnloadableFormSubmit(Q))this.unload();return}Q.preventDefault(),Q.target.disabled=!0,this.withinOwners(Q.target,(J)=>{R.exec(Q,"submit",z,J,Q.target,["push",{submitter:Q.submitter}])})});for(let Q of["change","input"])this.on(Q,(z)=>{if(z instanceof CustomEvent&&(z.target instanceof HTMLInputElement||z.target instanceof HTMLSelectElement||z.target instanceof HTMLTextAreaElement)&&z.target.form===void 0){if(z.detail&&z.detail.dispatcher)throw new Error(`dispatching a custom ${Q} event is only supported on input elements inside a form`);return}const J=this.binding("change"),W=z.target;if(this.blockPhxChangeWhileComposing&&z.isComposing){const F=`composition-listener-${Q}`;if(!j.private(W,F))j.putPrivate(W,F,!0),W.addEventListener("compositionend",()=>{W.dispatchEvent(new Event(Q,{bubbles:!0})),j.deletePrivate(W,F)},{once:!0});return}const q=W.getAttribute(J),Y=W.form&&W.form.getAttribute(J),G=q||Y;if(!G)return;if(W.type==="number"&&W.validity&&W.validity.badInput)return;const B=q?W:W.form,K=Z;Z++;const{at:M,type:X}=j.private(W,"prev-iteration")||{};if(M===K-1&&Q==="change"&&X==="input")return;j.putPrivate(W,"prev-iteration",{at:K,type:Q}),this.debounce(W,z,Q,()=>{this.withinOwners(B,(F)=>{j.putPrivate(W,e0,!0),R.exec(z,"change",G,F,W,["push",{_target:z.target.name,dispatcher:B}])})})});this.on("reset",(Q)=>{const z=Q.target;j.resetForm(z);const J=Array.from(z.elements).find((W)=>W.type==="reset");if(J)window.requestAnimationFrame(()=>{J.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(Z,$,Q,z){if(Q==="blur"||Q==="focusout")return z();const J=this.binding(m5),W=this.binding(p5),q=this.defaults.debounce.toString(),Y=this.defaults.throttle.toString();this.withinOwners(Z,(G)=>{const B=()=>!G.isDestroyed()&&document.body.contains(Z);j.debounce(Z,$,J,q,W,Y,B,()=>{z()})})}silenceEvents(Z){this.silenced=!0,Z(),this.silenced=!1}on(Z,$){this.boundEventNames.add(Z),window.addEventListener(Z,(Q)=>{if(!this.silenced)$(Q)})}jsQuerySelectorAll(Z,$,Q){const z=this.domCallbacks.jsQuerySelectorAll;return z?z(Z,$,Q):Q()}},y9=class{constructor(){this.transitions=new Set,this.promises=new Set,this.pendingOps=[]}reset(){this.transitions.forEach((Z)=>{clearTimeout(Z),this.transitions.delete(Z)}),this.promises.clear(),this.flushPendingOps()}after(Z){if(this.size()===0)Z();else this.pushPendingOp(Z)}addTransition(Z,$,Q){$();const z=setTimeout(()=>{this.transitions.delete(z),Q(),this.flushPendingOps()},Z);this.transitions.add(z)}addAsyncTransition(Z){this.promises.add(Z),Z.then(()=>{this.promises.delete(Z),this.flushPendingOps()})}pushPendingOp(Z){this.pendingOps.push(Z)}size(){return this.transitions.size+this.promises.size}flushPendingOps(){if(this.size()>0)return;const Z=this.pendingOps.shift();if(Z)Z(),this.flushPendingOps()}},V5=C9;var z1=O5(X5(),1),T9=document.querySelector("meta[name='csrf-token']").getAttribute("content"),g9=document.querySelector("meta[name='socket-path']").getAttribute("content"),k9=document.querySelector("meta[name='socket-transport']").getAttribute("content"),v9=k9=="longpoll"?B0:WebSocket,L5=new V5(g9,C1,{transport:v9,params:{_csrf_token:T9}});z1.default.config({barColors:{0:"#29d"},shadowColor:"rgba(0, 0, 0, .3)"});window.addEventListener("phx:page-loading-start",(Z)=>z1.default.show(300));window.addEventListener("phx:page-loading-stop",(Z)=>z1.default.hide());L5.connect();window.liveSocket=L5;
